<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="é»˜" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="ç¨‹åºå‘˜ å¾®å°˜ V">
<meta property="og:type" content="website">
<meta property="og:title" content="é»˜">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="é»˜">
<meta property="og:description" content="ç¨‹åºå‘˜ å¾®å°˜ V">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="é»˜">
<meta name="twitter:description" content="ç¨‹åºå‘˜ å¾®å°˜ V">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title> é»˜ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-79641673-1', 'auto');
  ga('send', 'pageview');
</script>











  
  
    
  

  <div class="container sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">é»˜</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸ºäº†ç”Ÿå­˜ï¼Œè€Œä¸€ç‚¹ç‚¹æ·¡å¿˜äº†æœ€åˆçš„æœ¬æ„ã€‚</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            ç•™è¨€
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/VPSç§‘å­¦ä¸Šç½‘æ•™ç¨‹3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/08/VPSç§‘å­¦ä¸Šç½‘æ•™ç¨‹3/" itemprop="url">
                  ç§‘å­¦ä¸Šç½‘æ•™ç¨‹ï¼ˆä¸‰ï¼‰â€”â€”VPSå®‰å…¨åŠ å›º
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-08T17:52:16+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç§‘å­¦ä¸Šç½‘/" itemprop="url" rel="index">
                    <span itemprop="name">ç§‘å­¦ä¸Šç½‘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/08/VPSç§‘å­¦ä¸Šç½‘æ•™ç¨‹3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/04/08/VPSç§‘å­¦ä¸Šç½‘æ•™ç¨‹3/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/04/08/VPSç§‘å­¦ä¸Šç½‘æ•™ç¨‹3/" class="leancloud_visitors" data-flag-title="ç§‘å­¦ä¸Šç½‘æ•™ç¨‹ï¼ˆä¸‰ï¼‰â€”â€”VPSå®‰å…¨åŠ å›º">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,150
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  5m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">æ›´æ–°</div><div class="line"><span class="number">2017.04</span>.<span class="number">08</span>  VPSæ—¥å¸¸ä¸€äº›å®‰å…¨æªæ–½</div><div class="line"><span class="number">2017.08</span>.<span class="number">22</span>  æ›´æ–°å®‰å…¨æªæ–½ï¼Œè¯»è€…åé¦ˆï¼Œæ²¡æœ‰debiançš„ï¼Œè¿™é‡ŒåŠ ä¸Šã€‚</div><div class="line"><span class="number">2017.10</span>.<span class="number">30</span>  çº æ­£é”™è¯¯,æ’ç‰ˆ.</div></pre></td></tr></table></figure>
<hr>
<ul>
<li><p>å¯¼è¯­<br>ç§‘å­¦ä¸Šç½‘æ•™ç¨‹ç³»åˆ—ï¼Œå¾ˆä¹…æ²¡æœ‰æ›´æ–°æ–°å†…å®¹äº†ã€‚æ›´æ–°å¸¸ç”¨å®‰å…¨æªæ–½ï¼Œè‡³å°‘ä¿è¯ï¼Œä¸ä¼šè¢«è½»æ˜“çš„å½“ä½œè‚‰é¸¡ã€‚éƒ½æ˜¯ä¸€äº›å¸¸ç”¨çš„å®‰å…¨æªæ–½ã€‚</p>
</li>
<li><p>ç³»ç»Ÿç¯å¢ƒï¼šCentOS/debian 7</p>
</li>
</ul>
<hr>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><ul>
<li>æœ‰ä¸¤ç§æ–¹æ¡ˆ<ul>
<li>å½»åº•å…³é—­SSHç™»é™†ï¼Œæ”¹ä¸ºå¯†é’¥ç™»é™†ï¼Œå®‰å…¨æ€§æœ€é«˜ï¼Œä½†é…ç½®è¾ƒä¸ºå¤æ‚</li>
<li>ä¿®æ”¹SSHç™»é™†ç«¯å£ï¼ŒåŒæ—¶å¼€æ”¾é»˜è®¤ç«¯å£ï¼Œå°†çˆ†ç ´ ssh å¯†ç çš„ IP å°åœ<h3 id="å¯†é’¥ç™»é™†"><a href="#å¯†é’¥ç™»é™†" class="headerlink" title="å¯†é’¥ç™»é™†"></a>å¯†é’¥ç™»é™†</h3></li>
</ul>
</li>
<li>ä¸»è¦æ­¥éª¤åœ¨è¿™é‡Œ,æœ‰æ—¶é—´å†æ›´æ–°<blockquote>
<p><a href="https://ttt.tt/104/" target="_blank" rel="external">https://ttt.tt/104/</a></p>
</blockquote>
</li>
</ul>
<h3 id="ä¿®æ”¹ç«¯å£"><a href="#ä¿®æ”¹ç«¯å£" class="headerlink" title="ä¿®æ”¹ç«¯å£"></a>ä¿®æ”¹ç«¯å£</h3><ul>
<li><p>CentOS å‘½ä»¤ å¦‚ä¸‹ï¼Œä»¥ä¸‹æ˜¯å°† SSH ç«¯å£æ”¹ä¸º 999 ç«¯å£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i &apos;s/#Port 22/Port 999/g&apos; /etc/ssh/sshd_config</div></pre></td></tr></table></figure>
<ul>
<li><p>debianéœ€è¦æ‰“å¼€/etc/ssh/sshd<em>config </em>æ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­çš„portåé¢çš„æ•°å­—,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/ssh/sshd_config</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹å…¶ä¸­çš„portåé¢çš„æ•°å­—ï¼Œä¸ºä½ è¦sshç™»é™†çš„ç«¯å£ï¼Œcltrl + xä¿å­˜ï¼Œå›è½¦é€€å‡ºã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="fail2ban"><a href="#fail2ban" class="headerlink" title="fail2ban"></a>fail2ban</h2><ul>
<li><p>fail2ban æ˜¯ Linux ä¸Šçš„ä¸€ä¸ªè‘—åçš„å…¥ä¾µä¿æŠ¤çš„å¼€æºæ¡†æ¶ï¼Œå®ƒä¼šç›‘æ§å¤šä¸ªç³»ç»Ÿçš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æ£€æµ‹åˆ°çš„ä»»ä½•å¯ç–‘çš„è¡Œä¸ºè‡ªåŠ¨è§¦å‘ä¸åŒçš„é˜²å¾¡åŠ¨ä½œã€‚å°†å°è¯•çˆ†ç ´ ssh å¯†ç çš„ IP å°åœï¼Œé»˜è®¤10åˆ†é’Ÿã€‚</p>
</li>
<li><p>è¯¦ç»†é…ç½®å®‰è£…æ–¹æ³•åœ¨å¦‚ä¸‹ç½‘å€ï¼Œè¿™é‡Œä½¿ç”¨é»˜è®¤é…ç½®å³å¯ã€‚</p>
<blockquote>
<p><a href="https://linux.cn/article-5067-1.html" target="_blank" rel="external">https://linux.cn/article-5067-1.html</a></p>
</blockquote>
</li>
<li><p>å®‰è£… fail2ban<br>CentOS éœ€è¦æå‰ <a href="https://linux.cn/article-2324-1.html" target="_blank" rel="external"> è®¾ç½® EPEL ä»“åº“ </a><br>ä»¥ root ç”¨æˆ·ç™»é™†ï¼Œé root ç”¨æˆ·éœ€è¦ å‘½ä»¤å‰ å¢åŠ  sudo</p>
<p>å®‰è£…å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//CentOS</div><div class="line">yum install fail2ban</div><div class="line">//Debian / ubuntu</div><div class="line">apt-get install fail2ban</div></pre></td></tr></table></figure>
</li>
<li><p>å…¶ä»–å‘½ä»¤</p>
<ul>
<li><p>é‡å¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service fail2ban restart</div></pre></td></tr></table></figure>
</li>
<li><p>éªŒè¯çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fail2ban-client ping</div></pre></td></tr></table></figure>
<p>è¿”å›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Server replied: pong</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼ˆdebianä¸ç”¨å‰é¢éªŒè¯å®Œæˆï¼Œå·²åŠ å…¥å¼€æœºå¯åŠ¨ï¼‰</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// CentOS/RHEL 6</div><div class="line">chkconfig fail2ban on</div><div class="line">// CentOS/RHEL 7</div><div class="line">systemctl enable fail2ban</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ç¦ç”¨Linuxå¤šä½™ç«¯å£"><a href="#ç¦ç”¨Linuxå¤šä½™ç«¯å£" class="headerlink" title="ç¦ç”¨Linuxå¤šä½™ç«¯å£"></a>ç¦ç”¨Linuxå¤šä½™ç«¯å£</h2><ul>
<li>å…³é—­å¤šä½™ç«¯å£æ˜¯æ°¸è¿œæ­£ç¡®çš„é€‰æ‹©ï¼åªç•™ä¸‹å¸¸ç”¨ç«¯å£ å’Œ SSRç«¯å£</li>
<li><p>é…ç½®  iptables <strong>è­¦å‘Š iptables é…ç½®ä¸æ˜¯ä¸€èˆ¬çš„å¤æ‚ï¼Œè°¨æ…æ“ä½œ</strong></p>
</li>
<li><p>æ¸…ç©ºé»˜è®¤è§„åˆ™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -F</div></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸22ç«¯å£ï¼Œç»™æš´åŠ›ç ´è§£ç•™ç‚¹ç©ºé—´ //doge</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT</div></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸53ç«¯å£ udp ï¼Œä¸€èˆ¬ç”¨åšDNSæœåŠ¡å™¨ï¼Œå¦‚æœä½ ä¸éœ€è¦åˆ™å¿½ç•¥æ­¤æ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">iptables -A OUTPUT -p udp --dport 53 -j ACCEPT</div><div class="line">iptables -A INPUT -p udp --sport 53 -j ACCEPT</div></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸æœ¬æœºè®¿é—®æœ¬æœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</div><div class="line">iptables -A OUTPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>å…è®¸çœŸæ­£ SSH ç«¯å£</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">iptables -A INPUT -p tcp -s 0/0 --dport 999 -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport 999 -m state --state ESTABLISHED -j ACCEPT</div></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸ 80 443 ç«¯å£ï¼Œhttp å’Œ https</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">iptables -A INPUT -p tcp -s 0/0 --dport 80 -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT</div><div class="line">iptables -A INPUT -p tcp -s 0/0 --dport 443 -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport 443 -m state --state ESTABLISHED -j ACCEPT</div></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸ SSRç«¯å£ ä»¥888 xxx ä¸ºä¾‹ ä½ æœ‰å‡ ä¸ªç«¯å£ï¼Œå°±æ·»åŠ å‡ ä¸ª</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">iptables -A INPUT -p tcp -s 0/0 --dport 888 -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport 888 -m state --state ESTABLISHED -j ACCEPT</div><div class="line"></div><div class="line">iptables -A INPUT -p tcp -s 0/0 --dport xxx -j ACCEPT</div><div class="line">iptables -A OUTPUT -p tcp --sport xxx -m state --state ESTABLISHED -j ACCEPT</div></pre></td></tr></table></figure>
</li>
<li><p>CentOS ä¿å­˜é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">iptables-save &gt; /etc/sysconfig/iptables</div><div class="line">``` </div><div class="line">é‡è½½ iptables</div></pre></td></tr></table></figure>
<p>iptables -L</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line">* debian 7 ä¿å­˜é…ç½®</div></pre></td></tr></table></figure>
<p>iptables-save &gt; /etc/iptables-rules<br>ip6tables-save &gt; /etc/ip6tables-rules</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">éšåä¿®æ”¹/etc/network/interfacesæ–‡ä»¶ï¼Œæœ€ååŠ å…¥</div></pre></td></tr></table></figure>
<p>pre-up iptables-restore &lt; /etc/iptables-rules<br>pre-up ip6tables-restore &lt; /etc/ip6tables-rules</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  é‡å¯æ‰§è¡Œ`iptables -L`ï¼Œçœ‹åˆ°é…ç½®å·²ç”Ÿæ•ˆã€‚</div><div class="line"></div><div class="line">## å®‰è£… CSF é˜²ç«å¢™</div><div class="line">* å‘½ä»¤</div></pre></td></tr></table></figure>
<p>rm -fv csf.tgz<br>wget <a href="http://download.configserver.com/csf.tgz" target="_blank" rel="external">http://download.configserver.com/csf.tgz</a><br>tar -xzf csf.tgz<br>cd csf<br>sh install.sh<br>//ä½¿ç”¨ä¸‹è¾¹çš„å‘½ä»¤æ¥éªŒè¯csfæ­£ç¡®å®‰è£…å¹¶å·²ç»è¿è¡Œ<br>perl /usr/local/csf/bin/csftest.pl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">## autoban è¡¥ä¸ï¼ˆ8.22ï¼‰æ¨è</div><div class="line">* æ¥è‡ªssåŸä½œè€…@clowwindy çš„è¡¥ä¸ï¼Œbanæ‰é‚£äº›å°è¯•ç ´è¯‘sså¯†ç çš„ipï¼Œåœ¨æ­¤å¯¹åŸä½œè€…è¡¨ç¤ºæ•¬æ„ï¼</div><div class="line">* åŸç†æ˜¯åŒä¸€ä¸ªipå‡ºç°3æ¬¡ä»¥ä¸Šå°è¯•ç ´è¯‘sså¯†ç ä¼šè¢«æ°¸ä¹…banæ‰ï¼Œssrä¹Ÿå¯ç”¨</div><div class="line">* æµ‹è¯•åªåœ¨debian 7ä¸Šè¿›è¡Œï¼Œéœ€è¦pythonç¯å¢ƒï¼Œä½†æ˜¯é€šè¿‡ç§‹æ°´é€¸å†°è„šæœ¬å®‰è£…ssr å·²ç»å®‰è£…å¥½äº†pythonç¯å¢ƒã€‚</div><div class="line"></div><div class="line">* ä»¥ä¸‹å†…å®¹å‚è€ƒ</div><div class="line">  &gt;https://plus.google.com/104980438521301094845/posts/9zypCffhdZu</div><div class="line"></div><div class="line">---</div><div class="line"></div><div class="line">* ä¸‹è½½è„šæœ¬</div></pre></td></tr></table></figure>
<p>wget <a href="https://raw.githubusercontent.com/Jasper-1024/shadowsocksr/manyuser/utils/autoban.py" target="_blank" rel="external">https://raw.githubusercontent.com/Jasper-1024/shadowsocksr/manyuser/utils/autoban.py</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line">* ssrè¿è¡Œ</div></pre></td></tr></table></figure>
<p>python autoban.py &lt; /var/log/shadowsocksr.log</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  æŸ¥çœ‹å“ªäº›ipè¯•å›¾è¿æ¥ç ´è§£ssrå¯†ç ã€‚åŸç‰ˆsså°†logæ–‡ä»¶è·¯å¾„æ›¿æ¢å³å¯ã€‚</div><div class="line">  </div><div class="line">* è‡ªåŠ¨ban ip</div><div class="line">  ç¼–è¾‘/etc/init.d/rc.localï¼ŒåŠ å…¥</div></pre></td></tr></table></figure>
<p>python /root/autoban.py &lt; /var/log/shadowsocksr.log</p>
<p>nohup tail -F /var/log/shadowsocksr.log | python /root/autoban.py &gt;log 2&gt;log &amp;<br>```<br>ä¿å­˜é€€å‡ºå³å¯ã€‚</p>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/07/Androidç¬”è®°â€”Rxjava2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/07/Androidç¬”è®°â€”Rxjava2/" itemprop="url">
                  Androidç¬”è®°â€”Rxjava2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-07T12:00:00+08:00">
                2017-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/07/Androidç¬”è®°â€”Rxjava2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/03/07/Androidç¬”è®°â€”Rxjava2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/03/07/Androidç¬”è®°â€”Rxjava2/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”Rxjava2">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  2,687
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  12m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹<br><a href="http://www.jianshu.com/u/c50b715ccaeb" target="_blank" rel="external">ç»™åˆå­¦è€…çš„RxJava2.0æ•™ç¨‹</a>(demoä»£ç æ¥æº)</p>
<blockquote>
<p><a href="http://www.jianshu.com/u/c50b715ccaeb" target="_blank" rel="external">http://www.jianshu.com/u/c50b715ccaeb</a></p>
</blockquote>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3 </li>
</ul>
<hr>
<ul>
<li>åœ¨Gradleé…ç½®:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">compile &apos;io.reactivex.rxjava2:rxjava:2.0.1&apos;</div><div class="line">compile &apos;io.reactivex.rxjava2:rxandroid:2.0.1&apos;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><ul>
<li>åœ¨Eventbusä¸­äº¦æ¶‰åŠäº†ç›¸å…³æ¦‚å¿µ,æ¯”è¾ƒç®€å•.åŒ…æ‹¬Observable(è¢«è§‚å¯Ÿè€…)ã€Observer(è§‚å¯Ÿè€…)ã€subscribe().äº‹ä»¶ç”±Observable(è¢«è§‚å¯Ÿè€…)å¼€å§‹å‘å‡º,é€šè¿‡subscribe()æœ€ç»ˆè¢«ä¼ é€’åˆ°Observer(è§‚å¯Ÿè€…).è€Œæ•´ä¸ªè¿‡ç¨‹ä¸­ä½ æ˜¯ç«™åœ¨Observer(è§‚å¯Ÿè€…)çš„ä½ç½®,ä¹Ÿå°±æ˜¯äº‹ä»¶çš„æœ«å°¾,è§‚å¯ŸObservable(è¢«è§‚å¯Ÿè€…).</li>
<li><p>ä¸Šå›¾</p>
</li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</div><div class="line">              emitter.onNext(1);</div><div class="line">              emitter.onComplete();</div><div class="line">          &#125;</div><div class="line">      &#125;).subscribe(new Observer&lt;Integer&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void onSubscribe(Disposable d) &#123;</div><div class="line">              Log.d(TAG, &quot;subscribe&quot;);</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onNext(Integer value) &#123;</div><div class="line">              Log.d(TAG, &quot;&quot; + value);</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onError(Throwable e) &#123;</div><div class="line">              Log.d(TAG, &quot;error&quot;);</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onComplete() &#123;</div><div class="line">              Log.d(TAG, &quot;complete&quot;);</div><div class="line">          &#125;</div><div class="line">      &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>äº‹ä»¶ç”±<code>emitter.onNext(1);</code>å¼€å§‹,æœ€ç»ˆè¢«<code>public void onNext(Integer value)</code>ç›¸åº”.è¢«è§‚å¯Ÿè€…äº‹ä»¶å‘é€ç»“æŸè°ƒç”¨<code>emitter.onComplete();</code>,åŒæ—¶è§‚å¯Ÿè€…æœ€ç»ˆä»¥<code>public void onComplete()</code>ç›¸åº”.</p>
</li>
</ul>
<hr>
<h2 id="note-ä¸Šä¸‹æ¸¸ä»¥-subscribeå»ºç«‹è¿æ¥å-äº‹ä»¶æ‰ä¼šå¼€å§‹å‘é€"><a href="#note-ä¸Šä¸‹æ¸¸ä»¥-subscribeå»ºç«‹è¿æ¥å-äº‹ä»¶æ‰ä¼šå¼€å§‹å‘é€" class="headerlink" title="* note: ä¸Šä¸‹æ¸¸ä»¥.subscribeå»ºç«‹è¿æ¥å,äº‹ä»¶æ‰ä¼šå¼€å§‹å‘é€."></a>* note: ä¸Šä¸‹æ¸¸ä»¥<code>.subscribe</code>å»ºç«‹è¿æ¥å,äº‹ä»¶æ‰ä¼šå¼€å§‹å‘é€.</h2><h3 id="Observable-è¢«è§‚å¯Ÿè€…-Observer-è§‚å¯Ÿè€…"><a href="#Observable-è¢«è§‚å¯Ÿè€…-Observer-è§‚å¯Ÿè€…" class="headerlink" title="Observable(è¢«è§‚å¯Ÿè€…) Observer(è§‚å¯Ÿè€…)"></a>Observable(è¢«è§‚å¯Ÿè€…) Observer(è§‚å¯Ÿè€…)</h3><ul>
<li>ObservableEmitter<br>ObservableEmitterï¼š Emitteræ„ä¸ºå‘å°„å™¨,äº‹ä»¶å‘é€.onNext(T value)ã€onComplete()å’ŒonError(Throwable error)åˆ†åˆ«å¯¹åº”nextäº‹ä»¶ã€completeäº‹ä»¶å’Œerroräº‹ä»¶ã€‚</li>
<li>Observer<integer>ä¸­onNext(Integer value)ã€onError(Throwable e)ã€onComplete()å¯¹åº”æ¥å—nextäº‹ä»¶ã€completeäº‹ä»¶å’Œerroräº‹ä»¶</integer></li>
<li>è¢«è§‚å¯Ÿè€…å‘é€completeäº‹ä»¶å’Œerroräº‹ä»¶å,è§‚å¯Ÿè€…æ¥å—åä¸å†ç»§ç»­å“åº”äº‹ä»¶,å³ä½¿è¢«è§‚å¯Ÿè€…è¿˜åœ¨å‘é€äº‹ä»¶.<strong>completeäº‹ä»¶å’Œerroräº‹ä»¶äº’æ–¥.</strong></li>
<li>åœ¨Observer<integer>ä¸­,è°ƒç”¨Disposable.dispose(),åˆ‡æ–­ç®¡é“.è¢«è§‚å¯Ÿè€…ç»§ç»­å‘é€,ä½†è§‚å¯Ÿè€…ä¸å†å“åº”.</integer></li>
</ul>
<h3 id="subscribe"><a href="#subscribe" class="headerlink" title="subscribe"></a>subscribe</h3><ul>
<li>å»ºç«‹Observable(è¢«è§‚å¯Ÿè€…) Observer(è§‚å¯Ÿè€…)ä¹‹é—´çš„ç®¡é“.æœ‰å¤šä¸ªé‡è½½.</li>
<li><p>é‡è½½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public final Disposable subscribe() &#123;&#125;</div><div class="line"></div><div class="line">public final Disposable subscribe(Consumer&lt;? super T&gt; onNext) &#123;&#125;</div><div class="line"></div><div class="line">public final Disposable subscribe(Consumer&lt;? super T&gt; onNext, Consumer&lt;? super Throwable&gt; onError) &#123;&#125; </div><div class="line"></div><div class="line">public final Disposable subscribe(Consumer&lt;? super T&gt; onNext, Consumer&lt;? super Throwable&gt; onError, Action onComplete) &#123;&#125;</div><div class="line"></div><div class="line">public final Disposable subscribe(Consumer&lt;? super T&gt; onNext, Consumer&lt;? super Throwable&gt; onError, Action onComplete, Consumer&lt;? super Disposable&gt; onSubscribe) &#123;&#125;</div><div class="line"></div><div class="line">public final void subscribe(Observer&lt;? super T&gt; observer) &#123;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>é‡è½½è¯´æ˜</p>
<ul>
<li>ä¸å¸¦å‚æ•° : è§‚å¯Ÿè€…ä¸å…³å¿ƒä»»ä½•äº‹ä»¶(æœ‰åµç”¨ğŸ˜µ)</li>
<li>åªå¸¦onNext : è§‚å¯Ÿè€…åªå“åº”nextäº‹ä»¶.</li>
<li>å…¶ä»–ç±»ä¼¼â€¦.æ¼”ç»æ¨ç†â€¦.</li>
<li>æœ€åä¸€ä¸ªæ˜¯ä¼ å…¥å®Œæ•´çš„Observerå¯¹è±¡.(demoå°±æ˜¯ğŸ™ƒ)</li>
</ul>
</li>
</ul>
<h2 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h2><ul>
<li>åŸºäºRxjavaçš„è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥æ‹†åˆ†å¤§å¤šæ•°çš„ä¸šåŠ¡é€»è¾‘,å³ä½¿å†å¢åŠ å¾ˆå¤šåŠŸèƒ½æ•´ä½“ä¹Ÿä¸ä¼šè¿‡äºæ··ä¹±.</li>
<li>ä½†Rxjavaçš„å¼ºå¤§å¹¶ä¸å±€é™åœ¨æ‹†åˆ†é€»è¾‘.ç”±è¢«è§‚å¯Ÿè€…åˆ°è§‚å¯Ÿè€…çš„æ•´ä¸ªäº‹ä»¶ä¼ é€’è¿‡ç¨‹,åŸºäºRxjavaæˆ‘ä»¬å¯ä»¥<strong>ä»»æ„æ‹†åˆ† åˆå¹¶ è½¬æ¢ äº‹ä»¶ã€åˆ‡æ¢çº¿ç¨‹ç­‰.</strong></li>
</ul>
<hr>
<h2 id="note-æ“ä½œç¬¦æ­é…-Lambda-è¡¨è¾¾å¼é£Ÿç”¨æ›´ä½³-ğŸ¤£"><a href="#note-æ“ä½œç¬¦æ­é…-Lambda-è¡¨è¾¾å¼é£Ÿç”¨æ›´ä½³-ğŸ¤£" class="headerlink" title="* note: æ“ä½œç¬¦æ­é… Lambda è¡¨è¾¾å¼é£Ÿç”¨æ›´ä½³ ğŸ¤£"></a>* note: æ“ä½œç¬¦æ­é… Lambda è¡¨è¾¾å¼é£Ÿç”¨æ›´ä½³ ğŸ¤£</h2><h3 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h3><ul>
<li>äº§ç”Ÿå¹¶å‘é€ Obserable äº‹ä»¶.</li>
<li>ä»…å¸¸ç”¨,è¯¦ç»†åœ¨<a href="https://maxwell-nc.github.io/android/rxjava2-2.html#timer" target="_blank" rel="external"> RxJava 2.x ä½¿ç”¨è¯¦è§£(äºŒ) åˆ›å»ºæ“ä½œç¬¦</a> <h4 id="creat"><a href="#creat" class="headerlink" title=".creat"></a>.creat</h4></li>
<li>å‰é¢demoä¸­å·²ç»å®é™…ä½¿ç”¨è¿‡äº†</li>
<li>ç”¨äºäº§ç”Ÿä¸€ä¸ª Obserable è¢«è§‚å¯Ÿè€…å¯¹è±¡,demoå¦‚ä¸Šæ‰€ç¤º.</li>
</ul>
<h4 id="just"><a href="#just" class="headerlink" title=".just"></a>.just</h4><ul>
<li>å¯¹äºç®€å•çš„å‡ ä¸ªæ•°æ®,ç›´æ¥ä½¿ç”¨justå‘é€å³å¯,æ— éœ€åˆ›å»º Obserable å¯¹è±¡.justæœ€å¤šå¯ä»¥æ¥æ”¶ <strong>10</strong> ä¸ªå‚æ•°.</li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Observable.just(&quot;test&quot;,&quot;test2&quot;)</div><div class="line">      .subscribe(str -&gt; Log.i(&quot;tag&quot;, str));</div></pre></td></tr></table></figure>
<p>ç›¸å½“äºé¡ºåºè°ƒç”¨onNext(â€œtestâ€)å’ŒonNext(â€œtest2â€)ï¼Œæœ€åè°ƒç”¨onCompleteæ–¹æ³•ã€‚</p>
</li>
</ul>
<h4 id="fromArray"><a href="#fromArray" class="headerlink" title=".fromArray"></a>.fromArray</h4><ul>
<li>åŠŸèƒ½ä¸justç±»ä¼¼ä½†fromArrayæ¥æ¥æ”¶ä»»æ„é•¿åº¦çš„æ•°æ®æ•°ç»„,ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥æ•°ç»„<code>fromArray(new int[]{1, 2, 3})</code></li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Observable.fromArray(1, 2, 3, 4, 5)</div><div class="line">      .subscribe(integer -&gt; Log.i(&quot;tag&quot;, String.valueOf(integer)));</div></pre></td></tr></table></figure>
<p>fromArrayä¸æ”¯æŒç›´æ¥ä¼ å…¥listè¿›ï¼Œlistä¼šè¢«å½“ä½œä¸€ä¸ªæ•´ä½“å‘é€.</p>
</li>
</ul>
<h4 id="fromIterable"><a href="#fromIterable" class="headerlink" title=".fromIterable"></a>.fromIterable</h4><ul>
<li>åŠŸèƒ½ä¸fromArrayç±»ä¼¼,ä½†æ˜¯å¯ä»¥æ¥æ”¶ list ç±»å‹,éå†å¯è¿­ä»£æ•°æ®é›†åˆ.</li>
<li>demo<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line">list.add(&quot;a&quot;);</div><div class="line">list.add(&quot;b&quot;);</div><div class="line">list.add(&quot;c&quot;);</div><div class="line"></div><div class="line">Flowable.fromIterable(list).subscribe(</div><div class="line">      s -&gt; Log.i(&quot;tag&quot;, s)</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="timer"><a href="#timer" class="headerlink" title=".timer"></a>.timer</h4><ul>
<li>æŒ‡å®šä¸€æ®µæ—¶é—´é—´éš”åå‘é€æ•°æ®(ä¸€æ¬¡æ€§),ä¸å¤ªå¸¸ç”¨.</li>
</ul>
<h3 id="çº¿ç¨‹åˆ‡æ¢"><a href="#çº¿ç¨‹åˆ‡æ¢" class="headerlink" title="çº¿ç¨‹åˆ‡æ¢"></a>çº¿ç¨‹åˆ‡æ¢</h3><ul>
<li>é»˜è®¤äº‹ä»¶ä¼ é€’çš„åŒæ–¹åœ¨åŒä¸€çº¿ç¨‹å·¥ä½œ.</li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observable.subscribeOn(Schedulers.newThread())     </div><div class="line">       .subscribeOn(Schedulers.io())              </div><div class="line">       .observeOn(AndroidSchedulers.mainThread()) </div><div class="line">       .observeOn(Schedulers.io())                </div><div class="line">       .subscribe(consumer);</div></pre></td></tr></table></figure>
</li>
<li><p>æ–¹æ³•:</p>
<ul>
<li>.subscribeOn() : æŒ‡å®šè¢«è§‚å¯Ÿè€…å‘é€äº‹ä»¶çº¿ç¨‹,<strong>ä»…ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æœ‰æ•ˆ!</strong>  </li>
<li>.observeOn() : æŒ‡å®šè§‚å¯Ÿè€…/æµå˜æ¢(å¯¹å‘é€çš„äº‹ä»¶å¤„ç†ğŸ––)çº¿ç¨‹,<strong>å¤šæ¬¡è°ƒç”¨,å¤šæ¬¡åˆ‡æ¢æœ‰æ•ˆ</strong></li>
</ul>
</li>
<li><p>å‚æ•°:</p>
<ul>
<li>Schedulers.io() : é€‚ç”¨äºioå¯†é›†å‹æ“ä½œ,ç½‘ç»œé€šä¿¡ã€ç£ç›˜æ“ä½œç­‰.</li>
<li>Schedulers.computation() : CPUå¯†é›†æ“ä½œ,éœ€è¦å¤§é‡CPUè®¡ç®—çš„æ“ä½œ.</li>
<li>Schedulers.newThread() : åˆ›å»ºæ–°çº¿ç¨‹.</li>
<li>AndroidSchedulers.mainThread() : Androidä¸»çº¿ç¨‹,é€šå¸¸ä¸ºæ›´æ–°UIç­‰.</li>
</ul>
</li>
</ul>
<h3 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h3><ul>
<li>å¯¹ Obserable äº‹ä»¶ç­›é€‰.</li>
<li>ä»…å¸¸ç”¨,è¯¦ç»†åœ¨<a href="https://maxwell-nc.github.io/android/rxjava2-3.html#filter" target="_blank" rel="external">RxJava 2.x ä½¿ç”¨è¯¦è§£(ä¸‰) è¿‡æ»¤æ“ä½œç¬¦</a></li>
</ul>
<h4 id="filter"><a href="#filter" class="headerlink" title=".filter"></a>.filter</h4><ul>
<li>åŸºæœ¬è¿‡æ»¤æ“ä½œç¬¦,æŒ‰ç…§ä»»æ„è‡ªå®šè§„åˆ™è¿‡æ»¤.</li>
</ul>
<h3 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h3><h3 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h3><h4 id="map"><a href="#map" class="headerlink" title=".map"></a>.map</h4><ul>
<li>å¤„ç†å‰åäº‹ä»¶æ•°é‡ä¹‹æ¯”<strong>1:1</strong>,äº‹ä»¶å˜æ¢å‰åé¡ºåº<strong>ä¸å˜</strong></li>
<li>mapä½œç”¨æ˜¯å¯¹Observableå‘é€çš„æ¯ä¸€ä¸ªäº‹ä»¶,åº”ç”¨å¤„ç†å˜æ¢å‡½æ•°,å†ç»§ç»­åƒä¸‹æ¸¸å‘é€.ä¸­é—´è¿‡ç¨‹å¯ä»¥è½¬æ¢äº‹ä»¶ç±»å‹ã€æ”¹å˜äº‹ä»¶å†…å®¹ç­‰ç­‰.<strong>åªéœ€è¦å˜æ¢åçš„äº‹ä»¶ç±»å‹ä¸ä¸‹æ¸¸æ¥æ”¶çš„ç±»å‹åŒ¹é…å³å¯.</strong></li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</div><div class="line">              emitter.onNext(1);</div><div class="line">              emitter.onNext(2);</div><div class="line">              emitter.onNext(3);</div><div class="line">          &#125;</div><div class="line">      &#125;).map(new Function&lt;Integer, String&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public String apply(Integer integer) throws Exception &#123;</div><div class="line">              return &quot;This is result &quot; + integer;</div><div class="line">          &#125;</div><div class="line">      &#125;).subscribe(new Consumer&lt;String&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void accept(String s) throws Exception &#123;</div><div class="line">              Log.d(TAG, s);</div><div class="line">          &#125;</div><div class="line">      &#125;);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯æŠŠintç±»å‹è½¬æ¢ä¸ºäº†stringç±»å‹,ä¸è§‚å¯Ÿè€…æ¥æ”¶çš„ç±»å‹åŒ¹é…å³å¯.</p>
</li>
</ul>
<h4 id="flatMap"><a href="#flatMap" class="headerlink" title=".flatMap"></a>.flatMap</h4><ul>
<li>å¤„ç†å‰åäº‹ä»¶æ•°é‡ä¹‹æ¯” <strong>1:n</strong>,äº‹ä»¶å˜æ¢å‰åé¡ºåº<strong>ä¸ä¿è¯</strong></li>
<li>flatMap,é€šä¿—ç‚¹å°±æ˜¯æŠŠObservableå‘é€çš„äº‹ä»¶æ‹†æ•£å˜æ¢å†,ç»§ç»­åƒä¸‹æ¸¸å‘é€.1ä¸ªObservableäº‹ä»¶å¯æ‹†æˆä»»æ„ä¸ª.<strong>åªéœ€è¦å˜æ¢åçš„äº‹ä»¶ç±»å‹ä¸ä¸‹æ¸¸æ¥æ”¶çš„ç±»å‹åŒ¹é…å³å¯.</strong></li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</div><div class="line">              emitter.onNext(1);</div><div class="line">              emitter.onNext(2);</div><div class="line">              emitter.onNext(3);</div><div class="line">          &#125;</div><div class="line">      &#125;).flatMap(new Function&lt;Integer, ObservableSource&lt;String&gt;&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public ObservableSource&lt;String&gt; apply(Integer integer) throws Exception &#123;</div><div class="line">              final List&lt;String&gt; list = new ArrayList&lt;&gt;();</div><div class="line">              for (int i = 0; i &lt; 3; i++) &#123;</div><div class="line">                  list.add(&quot;I am value &quot; + integer);</div><div class="line">              &#125;</div><div class="line">              return Observable.fromIterable(list).delay(10,TimeUnit.MILLISECONDS);</div><div class="line">          &#125;</div><div class="line">      &#125;).subscribe(new Consumer&lt;String&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void accept(String s) throws Exception &#123;</div><div class="line">              Log.d(TAG, s);</div><div class="line">          &#125;</div><div class="line">      &#125;);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯flatMapæŠŠä¸€ä¸ªintç±»å‹äº‹ä»¶æ‹†æˆäº†3ä¸ªStringç±»å‹,è¿è¡Œç»“æœçœ‹,æœ€ç»ˆäº‹ä»¶åˆ°è¾¾é¡ºåºä¸onNext(1);onNext(2);çš„å‘é€é¡ºåºæ— å…³</p>
</li>
</ul>
<h4 id="concatMap"><a href="#concatMap" class="headerlink" title=".concatMap"></a>.concatMap</h4><ul>
<li>å¤„ç†å‰åäº‹ä»¶æ•°é‡ä¹‹æ¯” <strong>1:n</strong>,äº‹ä»¶å˜æ¢å‰åé¡ºåº<strong>æŒ‰é¡ºåº</strong></li>
<li>ä¸flatMapä½œç”¨ç›¸åŒ,åªæ˜¯ä¿è¯äº†äº‹ä»¶ä¸¥æ ¼æŒ‰é¡ºåºè¾¾åˆ°ä¸‹æ¸¸.</li>
<li>demo å°±ä¸ä¸Šäº†,ç›´æ¥æ›¿æ¢flatMapçš„ä½ç½®å°±å¥½.</li>
</ul>
<h4 id="zip"><a href="#zip" class="headerlink" title=".zip"></a>.zip</h4><ul>
<li>å¤„ç†å‰åäº‹ä»¶æ•°é‡ä¹‹æ¯” <strong>n:1</strong>,äº‹ä»¶å˜æ¢å‰åé¡ºåº<strong>ä¸¥æ ¼æŒ‰é¡ºåº</strong></li>
<li>zip.æœ€å¸¸è§çš„å‹ç¼©æ–‡ä»¶æ ¼å¼,åœ¨è¿™é‡Œä¹Ÿæ˜¯ç±»ä¼¼çš„æ„æ€,zipå¯ä»¥ä¸¥æ ¼æŒ‰ç…§é¡ºåºåˆå¹¶å¤šä¸ª <strong>ä¸åŒç±»å‹</strong> Observableå‘é€çš„äº‹ä»¶.æ€»çš„å‘é€äº‹ä»¶æ•°é‡ä¸ä¸Šæ¸¸Observableå‘é€æœ€å°‘çš„é‚£ä¸ªæ•°é‡ç›¸åŒ.</li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Integer&gt; observable1 = Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;         </div><div class="line">  @Override                                                                                      </div><div class="line">  public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;                   </div><div class="line">      Log.d(TAG, &quot;emit 1&quot;);                                                                      </div><div class="line">      emitter.onNext(1);                                                                         </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit 2&quot;);                                                                      </div><div class="line">      emitter.onNext(2);                                                                         </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit 3&quot;);                                                                      </div><div class="line">      emitter.onNext(3);                                                                         </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit 4&quot;);                                                                      </div><div class="line">      emitter.onNext(4);                                                                         </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit complete1&quot;);                                                              </div><div class="line">      emitter.onComplete();                                                                      </div><div class="line">  &#125;                                                                                              </div><div class="line">&#125;).subscribeOn(Schedulers.io());                                                                   </div><div class="line"></div><div class="line">Observable&lt;String&gt; observable2 = Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123;           </div><div class="line">  @Override                                                 public void subscribe(ObservableEmitter&lt;String&gt; emitter) throws Exception &#123;                    </div><div class="line">      Log.d(TAG, &quot;emit A&quot;);                                                                  </div><div class="line">      emitter.onNext(&quot;A&quot;);                                                                       </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit B&quot;);                                                                      </div><div class="line">      emitter.onNext(&quot;B&quot;);                                                                       </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit C&quot;);                                                                      </div><div class="line">      emitter.onNext(&quot;C&quot;);                                                                       </div><div class="line">      Thread.sleep(1000);                                                                        </div><div class="line"></div><div class="line">      Log.d(TAG, &quot;emit complete2&quot;);                                                              </div><div class="line">      emitter.onComplete();                                                                      </div><div class="line">  &#125;                                                                                              </div><div class="line">&#125;).subscribeOn(Schedulers.io());                                                                   </div><div class="line"></div><div class="line">Observable.zip(observable1, observable2, new BiFunction&lt;Integer, String, String&gt;() &#123;               </div><div class="line">  @Override                                                                                      </div><div class="line">  public String apply(Integer integer, String s) throws Exception &#123;                              </div><div class="line">      return integer + s;                                                                        </div><div class="line">  &#125;                                                                                              </div><div class="line">&#125;).subscribe(new Observer&lt;String&gt;() &#123;                    </div><div class="line">  @Override                                                                                      </div><div class="line">  public void onSubscribe(Disposable d) &#123;                                                        </div><div class="line">      Log.d(TAG, &quot;onSubscribe&quot;);                                                                 </div><div class="line">  &#125;                                                                                              </div><div class="line"></div><div class="line">  @Override                                                                                      </div><div class="line">  public void onNext(String value) &#123;                                                             </div><div class="line">      Log.d(TAG, &quot;onNext: &quot; + value);                                                            </div><div class="line">  &#125;                                                                                              </div><div class="line"></div><div class="line">  @Override                                                                                      </div><div class="line">  public void onError(Throwable e) &#123;                                                             </div><div class="line">      Log.d(TAG, &quot;onError&quot;);                                                                     </div><div class="line">  &#125;                                                                                              </div><div class="line"></div><div class="line">  @Override                                                                                      </div><div class="line">  public void onComplete() &#123;                                                                     </div><div class="line">      Log.d(TAG, &quot;onComplete&quot;);                                                                  </div><div class="line">  &#125;                                                                                              </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸¤ä¸ªäº‹ä»¶å‘é€åœ¨åŒä¸€çº¿ç¨‹ä¸­.å½“ä¸¤ä¸ªäº‹ä»¶å‘é€ä¸å†åŒä¸€çº¿ç¨‹æ—¶,æƒ…å†µç±»ä¼¼,ä¸è¿‡å½“å¼‚æ­¥æ—¶,æ•°é‡è¾ƒå°‘çš„äº‹ä»¶å‘é€å®Œæˆ,å‘é€Completeäº‹ä»¶å,é€šé“éšå³è¢«åˆ‡æ–­.</p>
</li>
</ul>
<h4 id="Concat"><a href="#Concat" class="headerlink" title=".Concat"></a>.Concat</h4><ul>
<li>å¤„ç†å‰åäº‹ä»¶æ•°é‡ä¹‹æ¯” <strong>n:1</strong>,äº‹ä»¶å˜æ¢å‰åé¡ºåº<strong>ä¸¥æ ¼æŒ‰é¡ºåº</strong></li>
<li>Concat,å¯ä»¥ä¸¥æ ¼æŒ‰ç…§é¡ºåºåˆå¹¶ <strong>ç›¸åŒç±»å‹</strong> Observableå‘é€çš„äº‹ä»¶.</li>
</ul>
<h2 id="Backpressure"><a href="#Backpressure" class="headerlink" title="Backpressure"></a>Backpressure</h2><hr>
<h2 id="è¢«ç¿»è¯‘ä¸ºèƒŒå‹â€¦-å¦‚æ­¤æ–‡ä¸è¾¾æ„çš„ç›´è¯‘-èƒ½å¿-å¾€ä¸‹éƒ½æ˜¯å› ä¸ºåŸæ–‡-ğŸ˜ˆ"><a href="#è¢«ç¿»è¯‘ä¸ºèƒŒå‹â€¦-å¦‚æ­¤æ–‡ä¸è¾¾æ„çš„ç›´è¯‘-èƒ½å¿-å¾€ä¸‹éƒ½æ˜¯å› ä¸ºåŸæ–‡-ğŸ˜ˆ" class="headerlink" title="* è¢«ç¿»è¯‘ä¸ºèƒŒå‹â€¦(å¦‚æ­¤æ–‡ä¸è¾¾æ„çš„ç›´è¯‘,èƒ½å¿?å¾€ä¸‹éƒ½æ˜¯å› ä¸ºåŸæ–‡..ğŸ˜ˆ)"></a>* è¢«ç¿»è¯‘ä¸ºèƒŒå‹â€¦(å¦‚æ­¤æ–‡ä¸è¾¾æ„çš„ç›´è¯‘,èƒ½å¿?å¾€ä¸‹éƒ½æ˜¯å› ä¸ºåŸæ–‡..ğŸ˜ˆ)</h2><ul>
<li>å…¶å®æ¦‚å¿µæœ‰å¤Ÿç®€å•:å°†æ•´ä¸ªäº‹ä»¶äº§ç”Ÿ/ä¼ é€’/å¤„ç†çš„è¿‡ç¨‹æƒ³è±¡ä¸ºä¸€æ¡æ²³æµç”±ä¸Šè€Œä¸‹, Backpressure æŒ‡çš„æ˜¯ä¸Šæ¸¸äº§ç”Ÿçš„äº‹ä»¶å¤ªå¿«,è¿œè¿œè¶…è¿‡äº†ä¸‹æ¸¸çš„å¤„ç†é€Ÿåº¦,ä»¥è‡³äºç¼“å†²åŒºæº¢å‡º.ä¸Šæ¸¸æ¥äº†æ´ªæ°´,ä¸‹æ¸¸å¾„æµé‡ä¸å¤Ÿ,ä»¥è‡³äºä¸­é—´æ²³é“è·¨è¿‡äº†å ¤å²¸,æº¢å‡º.</li>
</ul>
<h3 id="FlowableåŸºç¡€"><a href="#FlowableåŸºç¡€" class="headerlink" title="FlowableåŸºç¡€"></a>FlowableåŸºç¡€</h3><ul>
<li><p>Rxjava 1.xä¸­éœ€è¦è‡ªè¡Œé€šè¿‡æ“ä½œç¬¦å¤„ç†,åˆ°äº†2.0ä¸­,åˆ™æœ‰äº†ä¸“é—¨å¯¹ä»˜å‘æ´ªæ°´ä¸Šæ¸¸çš„è¢«è§‚å¯Ÿè€…- Flowable .æˆ‘ä»¬å¸¸ç”¨çš„ observable åœ¨2.xä¸­ä¸€èˆ¬ç”¨äºä¸æ¶‰åŠ Backpressure çš„æƒ…å†µ.è€Œå¯¹åº”ä¸ observable çš„ Observer ,æ”¹ä¸ºäº†  Subscriber .</p>
</li>
<li><p>demo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">Flowable&lt;Integer&gt; upstream = Flowable.create(new FlowableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">          @Override</div><div class="line">          public void subscribe(FlowableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</div><div class="line">              Log.d(TAG, &quot;emit 1&quot;);</div><div class="line">              emitter.onNext(1);</div><div class="line">              Log.d(TAG, &quot;emit 2&quot;);</div><div class="line">              emitter.onNext(2);</div><div class="line">              Log.d(TAG, &quot;emit 3&quot;);</div><div class="line">              emitter.onNext(3);</div><div class="line">              Log.d(TAG, &quot;emit complete&quot;);</div><div class="line">              emitter.onComplete();</div><div class="line">          &#125;</div><div class="line">      &#125;, BackpressureStrategy.ERROR); //å¢åŠ äº†ä¸€ä¸ªå‚æ•°</div><div class="line"></div><div class="line">      Subscriber&lt;Integer&gt; downstream = new Subscriber&lt;Integer&gt;() &#123;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onSubscribe(Subscription s) &#123;</div><div class="line">              Log.d(TAG, &quot;onSubscribe&quot;);</div><div class="line">              s.request(Long.MAX_VALUE);  //æ³¨æ„è¿™å¥ä»£ç </div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onNext(Integer integer) &#123;</div><div class="line">              Log.d(TAG, &quot;onNext: &quot; + integer);</div><div class="line"></div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onError(Throwable t) &#123;</div><div class="line">               Log.w(TAG, &quot;onError: &quot;, t);</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          @Override</div><div class="line">          public void onComplete() &#123;</div><div class="line">              Log.d(TAG, &quot;onComplete&quot;);</div><div class="line">          &#125;</div><div class="line">      &#125;;</div><div class="line"></div><div class="line">      upstream.subscribe(downstream);</div></pre></td></tr></table></figure>
</li>
<li><p>æ³¨æ„ä¸¤ä¸ªåœ°æ–¹</p>
<ul>
<li>Flowableåˆ›å»ºæ—¶æ¯” observable å¤šäº†ä¸€ä¸ªå‚æ•°.(å‚æ•°ä½œç”¨ä¸‹èŠ‚è¯´æ˜)</li>
<li>Subscriberä¸­è°ƒç”¨äº† s.request .</li>
</ul>
</li>
<li><p>Flowable ä¸ Observable æœ€å¤§çš„ä¸åŒå°±æ˜¯ Flowableå†æ¬¡å‘é€äº‹ä»¶éœ€è¦ç­‰å¾… Subscriber ä¸­è°ƒç”¨ .request </p>
</li>
<li><p>.request() å®è´¨ä¸Šæ˜¯ä¸‹æ¸¸å‘ŠçŸ¥ä¸Šæ¸¸è‡ªå·±çš„å¤„ç†èƒ½åŠ›,ä½¿å¾—ä¸Šæ¸¸æ ¹æ®ä¸‹æ¸¸å¤„ç†èƒ½åŠ›å‘é€äº‹ä»¶.<strong>å¤šæ¬¡è°ƒç”¨,ä¸Šæ¸¸è¡¨ç¤ºå¤„ç†èƒ½åŠ›çš„æ•°å­—ä¼šå åŠ </strong>,ä¸Šæ¸¸æ¯å‘é€ä¸€ä¸ªäº‹ä»¶,è¯¥æ•°å­—å‡ä¸€,åˆ°0æŠ›å‡ºå¼‚å¸¸</p>
<ul>
<li>ä¸Šä¸‹æ¸¸åœ¨åŒä¸€çº¿ç¨‹æ—¶,ä¸‹æ¸¸æ²¡æœ‰æˆ–æ²¡æœ‰åŠæ—¶è°ƒç”¨ .request ,ä¸Šæ¸¸ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>å¼‚æ­¥çº¿ç¨‹æ—¶,ä¸‹æ¸¸å³ä½¿æ²¡æœ‰è°ƒç”¨ .request ä¼šæœ‰128ä¸ªäº‹ä»¶çš„ç¼“å­˜åŒº.ä¸Šæ¸¸å¯ç»§ç»­å‘å‡ºäº‹ä»¶,ç¼“å­˜åŒºè¶…å‡º128ä¸ªäº‹ä»¶å,æŠ›å‡ºå¼‚å¸¸.</li>
</ul>
</li>
</ul>
<h3 id="Flowableæ‹“å±•"><a href="#Flowableæ‹“å±•" class="headerlink" title="Flowableæ‹“å±•"></a>Flowableæ‹“å±•</h3><h2 id="è¿™é‡Œå¯¹-Flowable-å¤šçš„å‚æ•°è¿›è¡Œè¯´æ˜"><a href="#è¿™é‡Œå¯¹-Flowable-å¤šçš„å‚æ•°è¿›è¡Œè¯´æ˜" class="headerlink" title="* è¿™é‡Œå¯¹ Flowable å¤šçš„å‚æ•°è¿›è¡Œè¯´æ˜."></a>* è¿™é‡Œå¯¹ Flowable å¤šçš„å‚æ•°è¿›è¡Œè¯´æ˜.</h2><ul>
<li>å‚æ•°<ul>
<li>BackpressureStrategy.BUFFER : é»˜è®¤ç¼“å­˜åŒº128,è¿™ä¸ªå‚æ•°æå¤§æ‹“å±•äº†ç¼“å­˜åŒº,ä½¿å¾— Flowable è¡¨ç°ä¸ Observable å·®ä¸å¤š.</li>
<li>BackpressureStrategy.DROP : 128ç¼“å­˜åŒºæ»¡äº†,å°±ä¸¢å¼ƒä¸Šæ¸¸äº‹ä»¶,ç›´åˆ°ä¸‹æ¸¸å¤„ç†äº†ä¸€ä¸ªäº‹ä»¶,ç¼“å­˜åŒº -1 ,å†å…è®¸å­˜å…¥æ–°çš„ä¸Šæ¸¸äº‹ä»¶.</li>
<li>BackpressureStrategy.LATEST : æ°¸è¿œä¿å­˜æœ€åè¾¾åˆ°çš„128ä¸ªä¸Šæ¸¸äº‹ä»¶,ä¸Šæ¸¸æœ‰æ–°çš„äº‹ä»¶åˆ°è¾¾æ»¡è½½çš„ç¼“å­˜åŒºæ—¶,ä¸¢å¼ƒç¬¬ä¸€ä¸ªå­˜å…¥ç¼“å­˜åŒºçš„ä¸Šæ¸¸äº‹ä»¶.</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>å¯¹äºä¸æ˜¯ç”±æˆ‘ä»¬ç¼–å†™çš„ Flowable ä¹Ÿå¯ä»¥é€šè¿‡ interval æ“ä½œç¬¦æ¥åŠ å·¥.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Flowable.interval(1, TimeUnit.MICROSECONDS)</div><div class="line">              .onBackpressureDrop()  //åŠ ä¸Š Backpressure ç­–ç•¥</div></pre></td></tr></table></figure>
</li>
<li><p>å¯¹åº”ä¸Šæ–‡,æŒ‡å®šå‚æ•°æœ‰3,æ„æ€åŒä¸Š.</p>
<ul>
<li>onBackpressureBuffer()</li>
<li>onBackpressureDrop()</li>
<li>onBackpressureLatest()</li>
</ul>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/07/Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/07/Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥/" itemprop="url">
                  Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-03-07T12:00:00+08:00">
                2017-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/07/Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/03/07/Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/03/07/Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”ä»¿ç»¿è‰²å®ˆæŠ¤å—œç¡æ¨¡å¼é€šçŸ¥">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,169
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  5m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
<li><a href="https://developer.android.com/training/notify-user/index.html" target="_blank" rel="external">Android  Training Notifying the User</a></li>
<li><a href="https://developer.android.com/guide/topics/ui/notifiers/notifications.html#CreateNotification" target="_blank" rel="external">Android API é€šçŸ¥</a></li>
<li><a href="https://www.oschina.net/question/234345_40111" target="_blank" rel="external">ã€Androidã€‘çŠ¶æ€æ é€šçŸ¥Notificationã€NotificationManagerè¯¦è§£</a></li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3 </li>
</ul>
<p>å¯¼è¯­</p>
<ul>
<li>OneTapDozeé‡åˆ°çš„ç¬¬ä¸€ä¸ªéš¾é¢˜ï¼Œé¡ºå¸¦è®°å½•Android é€šçŸ¥ç›¸å…³å†…å®¹</li>
</ul>
<hr>
<h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><ul>
<li><p>ç»¿è‰²å®ˆæŠ¤è¿›å…¥dozeæ¨¡å¼åï¼Œä¼šåœ¨é€šçŸ¥æ åˆ›å»ºä¸€ä¸ªè®¡æ—¶é€šçŸ¥ å¦‚ä¸‹å›¾<br><img src="http://cdn3.snapgram.co/imgs/2017/03/07/Screenshot_20170307-231118.png" alt="Screenshot_20170307-231118.png"></p>
</li>
<li><p>é€€å‡ºdozeæ¨¡å¼åï¼Œä¼šæŒ‡ç¤ºè¿›å…¥dozeå’Œé€€å‡ºdozeçš„æ—¶é—´æ®µã€‚<br><img src="http://cdn4.snapgram.co/images/2017/03/07/Screenshot_20170307-231132.png" alt="Screenshot_20170307-231132.png"></p>
</li>
<li><p>æˆ‘ä»¬è¦ä»¿ç…§çš„æ ·å¼å°±æ˜¯è¿™æ ·ï¼Œè¿›å…¥é€€å‡ºdozeï¼Œå¯¹åº”åˆ›å»ºé€šçŸ¥çš„ä»£ç éƒ½åœ¨dozeæ¨¡å¼æ”¹å˜çš„Broadcastä¸­ã€‚</p>
</li>
</ul>
<h2 id="åŸºç¡€éƒ¨åˆ†"><a href="#åŸºç¡€éƒ¨åˆ†" class="headerlink" title="åŸºç¡€éƒ¨åˆ†"></a>åŸºç¡€éƒ¨åˆ†</h2><h3 id="åˆ›å»ºé€šçŸ¥"><a href="#åˆ›å»ºé€šçŸ¥" class="headerlink" title="åˆ›å»ºé€šçŸ¥"></a>åˆ›å»ºé€šçŸ¥</h3><ul>
<li>è¡Œæ–‡å‰ï¼š<br>Androidæ¯æ¬¡ç‰ˆæœ¬å‡ ä¹éƒ½ä¼šæœ‰é€šçŸ¥APIçš„æ”¹åŠ¨ï¼Œä¸åŒç‰ˆæœ¬ä¹‹é—´é€šçŸ¥å…¼å®¹æ€§å¾ˆæ˜¯é—®é¢˜ï¼Œä¸ºæ­¤æˆ‘ä»¬ä½¿ç”¨support_v7 åº“ä¸­çš„NotificationCompat.Builderä»£æ›¿Notification.BuilderäºŒè€…ä½¿ç”¨æ–¹å¼ç›¸åŒ</li>
</ul>
<hr>
<ul>
<li><p>æ¶‰åŠåˆ°çš„ä¸¤ä¸ªç±»</p>
<ul>
<li>NotificationManager</li>
<li>Notification (supportåº“ä¸­å¯¹åº”NotificationCompat)</li>
</ul>
</li>
<li><p>NotificationManager</p>
<ul>
<li>çŠ¶æ€æ é€šçŸ¥çš„ç®¡ç†ç±»ï¼Œè´Ÿè´£å‘é€šçŸ¥ã€æ¸…é™¤é€šçŸ¥ç­‰ </li>
<li>NotificationManager æ˜¯ä¸€ä¸ªç³»ç»ŸServiceï¼Œå¿…é¡»é€šè¿‡ getSystemService()æ–¹æ³•æ¥è·å–</li>
</ul>
</li>
<li><p>Notification</p>
<ul>
<li>å…·ä½“çš„çŠ¶æ€æ é€šçŸ¥å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®iconã€æ–‡å­—ã€æç¤ºå£°éŸ³ã€æŒ¯åŠ¨ç­‰å‚æ•°</li>
<li>ä¸€ä¸ªBuilderå¯¹è±¡è‡³å°‘åŒ…å«ä¸‰ä¸ªæ–¹é¢<ul>
<li>ä¸€ä¸ªå°å›¾æ ‡ï¼Œé€šè¿‡setSmallIcon()æ–¹æ³•è®¾ç½®ã€‚</li>
<li>é€šçŸ¥æ ‡é¢˜ï¼Œé€šè¿‡setContentTitle()æ–¹æ³•è®¾ç½®ã€‚</li>
<li>è¯¦ç»†æ–‡æœ¬ï¼Œé€šè¿‡setContentText()æ–¹æ³•è®¾ç½®ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ç®€å•ç¤ºä¾‹</p>
<ul>
<li><p>åˆ›å»ºé€šçŸ¥æ„å»ºå™¨<br> ä»£ç </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Notification notification = <span class="keyword">new</span> NotificationCompat.Builder(<span class="keyword">this</span>)</div><div class="line">           .setContentTitle(<span class="string">"è¿™æ˜¯é€šçŸ¥æ ‡é¢˜"</span>)</div><div class="line">           .setContentText(<span class="string">"è¿™æ˜¯é€šçŸ¥å†…å®¹"</span>)</div><div class="line">           <span class="comment">//è¿™é‡Œä½¿ç”¨çš„æ˜¯åº”ç”¨å›¾æ ‡ï¼Œä¸€èˆ¬æ²¡äººè¿™ä¹ˆå¹²ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿</span></div><div class="line">           .setSmallIcon(R.mipmap.ic_launcher)</div><div class="line">           .build();</div></pre></td></tr></table></figure>
<ul>
<li><p>å‘å¸ƒé€šçŸ¥</p>
<ul>
<li>è·å¾—NotificationManagerçš„å®ä¾‹</li>
<li>ä½¿ç”¨notify()æ–¹æ³•å‘å¸ƒé€šçŸ¥ã€‚åœ¨è°ƒç”¨notify()æ–¹æ³•  æŒ‡å®šé€šçŸ¥çš„IDï¼Œ(IDç”¨äºé€šçŸ¥æ›´æ–°)  åŠ è½½Notificationå®ä¾‹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> mNotificationId = <span class="number">001</span>;</div><div class="line"></div><div class="line">NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</div><div class="line">manager.notify(mNotificationId, notification);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æ•ˆæœå¦‚ä¸‹</p>
<ul>
<li>android 7.0 / 6.0 /4.0 é€šè¿‡</li>
<li><img src="http://cdn1.snapgram.co/imgs/2017/02/02/ScreenShot_20170202173430.png" alt="ScreenShot_20170202173430.png"></li>
</ul>
</li>
</ul>
<h3 id="æ›´æ–°é€šçŸ¥"><a href="#æ›´æ–°é€šçŸ¥" class="headerlink" title="æ›´æ–°é€šçŸ¥"></a>æ›´æ–°é€šçŸ¥</h3><ul>
<li><p>å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„NotificationCompatå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åœ¨åŸNotificationCompatå¯¹è±¡åŸºç¡€ä¸Šä¿®æ”¹ï¼Œæœ€ååªè¦ .notify æ–¹æ³•ä¸­å¯¹åº”åŒä¸€ä¸ª mNotificationId ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æ›´æ–°å·²æœ‰é€šçŸ¥ï¼Œä»£ç ä¸åœ¨ç´¯èµ˜ã€‚</p>
</li>
<li><p>åŸºç¡€éƒ¨åˆ†åˆ°æ­¤ï¼Œè¶³çŸ£</p>
</li>
</ul>
<h2 id="æ­£é¢˜"><a href="#æ­£é¢˜" class="headerlink" title="æ­£é¢˜"></a>æ­£é¢˜</h2><ul>
<li>å®ç°æ—¶é—´æ®µçš„æ˜¾ç¤ºï¼Œè‚¯å®šä¼šä¿å­˜ç³»ç»Ÿè¿›å…¥doze é€€å‡ºdozeå¯¹åº”çš„æ—¶é—´ç‚¹ã€‚å†è®¡ç®—å‡ºä¸­é—´ç»å†çš„æ—¶é—´ã€‚</li>
</ul>
<h3 id="æå–ç³»ç»Ÿæ—¶é—´"><a href="#æå–ç³»ç»Ÿæ—¶é—´" class="headerlink" title="æå–ç³»ç»Ÿæ—¶é—´"></a>æå–ç³»ç»Ÿæ—¶é—´</h3><ul>
<li><p>java.util.Date<br>è¿™é‡Œç”¨åˆ°äº†javaä¸­çš„ æ—¶é—´ç±»å‹ java.util.Date<br>java.util.Date æ˜¯javaä¸­å¸¸ç”¨æ—¶é—´ç±»å‹ï¼Œå¯ä»¥è¢«SimpleDateFormatæ ¼å¼åŒ–format() æŒ‡å®šè¾“å‡ºçš„æ—¶é—´æ ¼å¼<br>æ¯”å¦‚æˆ‘ä»¬éœ€è¦ å°æ—¶ï¼šåˆ†ï¼šç§’<br><code>SimpleDateFormat scanf = new SimpleDateFormat(&quot;HH:mm:ss&quot;);</code><br><code>scanf.format(java.util.Date)</code> å³å¯ã€‚</p>
</li>
<li><p>æå‰å½“å‰ç³»ç»Ÿæ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">java.util.Date time_after = <span class="keyword">null</span>;</div><div class="line">time_after = <span class="keyword">new</span> java.util.Date(System.currentTimeMillis());</div></pre></td></tr></table></figure>
</li>
<li><p>è®¡ç®—æ—¶é—´å·®<br>ç†è®ºä¸Šæ˜¯ä¸¤ä¸ªæ—¶é—´ç›¸å‡å†æ ¼å¼åŒ–è¾“å‡ºå³å¯ï¼Œå¯æƒœæ²¡æˆï¼ŒåŸå› è¿˜æ²¡æ‰¾åˆ°ã€‚äºæ˜¯åœŸåŠæ³•ï¼š</p>
<ul>
<li>è°ƒç”¨ .getTime() æ–¹æ³•ï¼Œå°† java.util.Date è½¬åŒ–ä¸ºæ¯«ç§’è®¡æ—¶(long)</li>
<li>å–ä¸¤è€…å·®å€¼</li>
<li>è½¬åŒ–ä¸º æ—¶é—´é•¿çŸ­ å­—ç¬¦ä¸²è¿”å›ï¼Œ</li>
<li>ä»£ç å¦‚ä¸‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> size = (time_after.getTime() - time_befor.getTime());</div><div class="line"> string = scanf.format(time_befor) + <span class="string">"-"</span> + scanf.format(time_after) + <span class="string">"="</span>+ trform(size);</div><div class="line">      </div><div class="line"> <span class="function">String <span class="title">trform</span><span class="params">(<span class="keyword">long</span> size)</span> </span>&#123;</div><div class="line"> <span class="keyword">long</span> day, hour, min, secone;</div><div class="line"> </div><div class="line"> day = size / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);          <span class="comment">//ä»¥å¤©æ•°ä¸ºå•ä½å–æ•´</span></div><div class="line"> hour = (size / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>) - day * <span class="number">24</span>);             <span class="comment">//ä»¥å°æ—¶ä¸ºå•ä½å–æ•´</span></div><div class="line"> min = ((size / (<span class="number">60</span> * <span class="number">1000</span>)) - day * <span class="number">24</span> * <span class="number">60</span> - hour * <span class="number">60</span>);    <span class="comment">//ä»¥åˆ†é’Ÿä¸ºå•ä½å–æ•´</span></div><div class="line"> secone = (size / <span class="number">1000</span> - day * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - hour * <span class="number">60</span> * <span class="number">60</span> - min * <span class="number">60</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (day != <span class="number">0</span>) &#123;</div><div class="line">   <span class="keyword">return</span> day + <span class="string">"d"</span> + hour + <span class="string">"h"</span> + min + <span class="string">"m"</span> + secone + <span class="string">"s"</span>;</div><div class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hour != <span class="number">0</span>) &#123;</div><div class="line">         <span class="keyword">return</span> hour + <span class="string">"h"</span> + min + <span class="string">"m"</span> + secone + <span class="string">"s"</span>;</div><div class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (min != <span class="number">0</span>) &#123;</div><div class="line">         <span class="keyword">return</span> min + <span class="string">"m"</span> + secone + <span class="string">"s"</span>;</div><div class="line">     &#125; <span class="keyword">else</span> &#123;</div><div class="line">         <span class="keyword">return</span> secone + <span class="string">"s"</span>;</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="é€šçŸ¥æ‰©å±•å¸ƒå±€"><a href="#é€šçŸ¥æ‰©å±•å¸ƒå±€" class="headerlink" title="é€šçŸ¥æ‰©å±•å¸ƒå±€"></a>é€šçŸ¥æ‰©å±•å¸ƒå±€</h3><ul>
<li><p>åœ¨å¦‚ä¸‹å›¾ç‰‡ä¸­ï¼Œå¯ä»¥å‘ç°ï¼Œé€šçŸ¥åœ¨å‘å‡ºåï¼Œåªé»˜è®¤æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡çš„æ—¶é—´è®°å½•ï¼Œå…¶ä»–æ—¶é—´è®°å½•å¯ä»¥åœ¨æ­¤æ¡é€šçŸ¥ä¸Šä¸‹æ»‘æŸ¥çœ‹ã€‚æ˜æ˜¾ä¸åŸºç¡€éƒ¨åˆ†ä¸åŒã€‚<br><img src="http://cdn4.snapgram.co/images/2017/03/07/Screenshot_20170307-231132.png" alt="Screenshot_20170307-231132.png"></p>
</li>
<li><p>æ­¤å¤„åº”ç”¨äº† Builder.setStyle() æ‹“å±•å¸ƒå±€ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ç”¨äºæ‹“å±•é€šçŸ¥æ˜¾ç¤ºèŒƒå›´</p>
</li>
</ul>
<hr>
<h4 id="ä½¿ç”¨æ‰©å±•å¸ƒå±€"><a href="#ä½¿ç”¨æ‰©å±•å¸ƒå±€" class="headerlink" title="ä½¿ç”¨æ‰©å±•å¸ƒå±€"></a>ä½¿ç”¨æ‰©å±•å¸ƒå±€</h4><ul>
<li>ä½¿ç”¨æ‹“å±•å¸ƒå±€<ul>
<li>æ„å»ºä¸€ä¸ª inboxStyle å¯¹è±¡</li>
<li>.addLineæ–¹æ³•  æ·»åŠ  String  inboxStyle è¡Œ</li>
<li>ä½¿ç”¨ Builder.setStyle( inboxStyle )åŠ è½½åˆ°é€šçŸ¥</li>
<li>ç­‰å¾…é€šçŸ¥å‘å¸ƒå³å¯ã€‚</li>
</ul>
</li>
<li><p>ç®€å•ä¾‹ç¨‹å¦‚ä¸‹ </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åˆ›å»º inboxStyle</span></div><div class="line"> NotificationCompat.InboxStyle inboxStyle = <span class="keyword">new</span> NotificationCompat.InboxStyle();</div><div class="line"> <span class="comment">//æ·»åŠ  String è¡Œ ï¼Œå‰ææ˜¯ æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ª String</span></div><div class="line"> inboxStyle.addLine(string);</div><div class="line"> <span class="comment">// åœ¨notification è®¾ç½®    inboxStyle åœ¨ä¸€å † build é‡Œé¢</span></div><div class="line"> .setStyle(inboxStyle)</div></pre></td></tr></table></figure>
</li>
<li><p>æ¸…é™¤åŸæœ‰å†…å®¹ï¼Œå‘å¸ƒæ–°çš„ inboxStyle åªéœ€è¦ <code>inboxStyle = new NotificationCompat.InboxStyle();</code></p>
</li>
</ul>
<h3 id="Dozeæ¨¡å¼æ”¹å˜å¹¿æ’­"><a href="#Dozeæ¨¡å¼æ”¹å˜å¹¿æ’­" class="headerlink" title="Dozeæ¨¡å¼æ”¹å˜å¹¿æ’­"></a>Dozeæ¨¡å¼æ”¹å˜å¹¿æ’­</h3><h2 id="å¯¹åº”-ACTION-DEVICE-IDLE-MODE-CHANGED"><a href="#å¯¹åº”-ACTION-DEVICE-IDLE-MODE-CHANGED" class="headerlink" title="* å¯¹åº” ACTION_DEVICE_IDLE_MODE_CHANGED"></a>* å¯¹åº” <code>ACTION_DEVICE_IDLE_MODE_CHANGED</code></h2><ul>
<li>å‘ï¼šåªèƒ½åŠ¨æ€æ³¨å†Œï¼Œé™æ€æ³¨å†Œæ— æ•ˆï¼Œå…·ä½“ä»£ç ä¸­<code>powermanger.ACTION_DEVICE_IDLE_MODE_CHANGED</code> éœ€è¦å®ä¾‹åŒ– PowerManger ï¼Œè€Œ PowerManger åˆæ˜¯ä¸ Activityç»‘å®šï¼Œæ‰€ä»¥åªæœ‰åº”ç”¨ä¿æŒåå°å­˜æ´»æ—¶æ‰ä¼šè¿›å…¥å¹¿æ’­ã€‚</li>
<li>ä¾‹ç¨‹å¦‚ä¸‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å®ä¾‹åŒ– PowerManager</span></div><div class="line">PowerManager powermanger = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);</div><div class="line"><span class="comment">//åŠ¨æ€æ³¨å†Œå¹¿æ’­</span></div><div class="line">intentFilter = <span class="keyword">new</span> IntentFilter();</div><div class="line">intentFilter.addAction(powermanger.ACTION_DEVICE_IDLE_MODE_CHANGED);</div><div class="line"><span class="comment">//idlemodechage æ˜¯ BroadcastReceiver </span></div><div class="line">idlemodechage = <span class="keyword">new</span> IdleModeChange();</div><div class="line">registerReceiver(idlemodechage, intentFilter);</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/19/Androidç¬”è®°-ContentResolver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/19/Androidç¬”è®°-ContentResolver/" itemprop="url">
                  Androidç¬”è®°â€”ContentResolver
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-01-19T12:00:00+08:00">
                2017-01-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/01/19/Androidç¬”è®°-ContentResolver/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/01/19/Androidç¬”è®°-ContentResolver/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/01/19/Androidç¬”è®°-ContentResolver/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”ContentResolver">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,159
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  5m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
<li><a href="http://www.jianshu.com/p/57798618bd90" target="_blank" rel="external">android6.0è¿è¡Œæ—¶æƒé™è¯¦è§£</a></li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3 </li>
</ul>
<p>å¯¼è¯­</p>
<ul>
<li>å†…å®¹æä¾›å™¨æ˜¯å®‰å…¨çš„åº”ç”¨é—´å…±äº«æ•°æ®é€”å¾„ï¼Œåœ¨æ­£å¼è¿›å…¥ä¹‹å‰éœ€è¦äº†è§£ä¸€ä¸‹ Android è‡ª6.0ä»¥æ¥æƒé™çš„å˜åŒ–</li>
</ul>
<hr>
<h2 id="Android-æƒé™è¯¦è§£"><a href="#Android-æƒé™è¯¦è§£" class="headerlink" title="Android æƒé™è¯¦è§£"></a>Android æƒé™è¯¦è§£</h2><hr>
<p>èµ„æ–™æ¥æºï¼š</p>
<ul>
<li><a href="http://www.jianshu.com/p/57798618bd90" target="_blank" rel="external">android6.0è¿è¡Œæ—¶æƒé™è¯¦è§£</a></li>
<li><a href="https://developer.android.com/guide/topics/security/permissions.html" target="_blank" rel="external">Develop-API Guides-ç³»ç»Ÿæƒé™</a></li>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
</ul>
<hr>
<h3 id="Androidæƒé™ä»‹ç»"><a href="#Androidæƒé™ä»‹ç»" class="headerlink" title="Androidæƒé™ä»‹ç»"></a>Androidæƒé™ä»‹ç»</h3><ul>
<li><p>Android æ˜¯ä¸€ä¸ªæƒé™åˆ†éš”çš„æ“ä½œç³»ç»Ÿ<br>æ¯ä¸ªåº”ç”¨ç³»ç»Ÿæ ‡è¯†ï¼ˆLinux ç”¨æˆ· ID å’Œç»„ IDï¼‰ä¸åŒã€‚ç³»ç»Ÿå„éƒ¨åˆ†æ ‡è¯†äº¦ä¸ç›¸åŒã€‚Linux æ®æ­¤å°†ä¸åŒçš„åº”ç”¨ä»¥åŠåº”ç”¨ä¸ç³»ç»Ÿåˆ†éš”å¼€æ¥ã€‚<br>æ›´è¯¦ç»†çš„å®‰å…¨åŠŸèƒ½é€šè¿‡â€œæƒé™â€æä¾›ï¼Œæƒé™ ä¼šé™åˆ¶ç‰¹å®šè¿›ç¨‹å¯ä»¥æ‰§è¡Œçš„å…·ä½“æ“ä½œï¼Œå¹¶ä¸”æ ¹æ® URI æƒé™æˆæƒä¸´æ—¶è®¿é—®ç‰¹å®šçš„æ•°æ®æ®µ</p>
</li>
<li><p>æƒé™å£°æ˜<br>æœ€å¸¸è§çš„æƒé™å£°æ˜åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªuses-permission æ ‡è®°, </p>
<ul>
<li>ä¾‹å¦‚ å£°æ˜çŸ­ä¿¡æƒé™ <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">  <span class="attr">package</span>=<span class="string">"com.android.app.myapp"</span> &gt;</div><div class="line">  <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.RECEIVE_SMS"</span> /&gt;</span></div><div class="line">  ...</div><div class="line">  <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>android 6.0 æƒé™æœºåˆ¶<br>android 6.0ä¹‹å‰ æƒé™åŠåœ¨å®‰è£…çš„æ—¶å€™ï¼Œæ ¹æ®æƒé™å£°æ˜äº§ç”Ÿä¸€ä¸ªæƒé™åˆ—è¡¨ï¼Œç”¨æˆ·åªæœ‰åœ¨åŒæ„ä¹‹åæ‰èƒ½å®Œæˆappçš„å®‰è£…ã€‚<br>android 6.0 ä»¥å å¼•å…¥äº†  è¿è¡Œæ—¶æƒé™ åŠŸèƒ½ï¼Œåº”ç”¨æ‰€éœ€æƒé™ä¸å†ä¸€æ¬¡æ€§åœ¨å®‰è£…æ—¶ç”³è¯·ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶éœ€è¦ç”¨åˆ°é‚£ç§æƒé™å‘ç”¨æˆ·ç”³è¯·ï¼ŒåŒæ—¶ç”¨æˆ·ä¹Ÿå¯ä»¥éšæ—¶å–æ¶ˆè¯¥æˆæƒ</p>
</li>
<li><p>æƒé™åˆ†ç±»</p>
<ul>
<li>Normal Permissions(æ™®é€šæƒé™)<br>ä¸æ¶‰åŠç”¨æˆ·éšç§ï¼Œä¸éœ€è¦ç”¨æˆ·è¿›è¡Œæˆæƒçš„ï¼Œä¾‹å¦‚ æ‰‹æœºéœ‡åŠ¨ã€è®¿é—®ç½‘ç»œç­‰</li>
<li>Dangerous Permission(å±é™©æƒé™)<br>æ¶‰åŠåˆ°ç”¨æˆ·éšç§çš„ï¼Œéœ€è¦ç”¨æˆ·è¿›è¡Œæˆæƒï¼Œä¾‹å¦‚ è¯»å–sdcardã€è®¿é—®é€šè®¯å½•ç­‰<br><a href="https://developer.android.com/guide/topics/security/permissions.html" target="_blank" rel="external">å±é™©æƒé™ç»„</a>å¦‚è¡¨1</li>
</ul>
</li>
</ul>
<h3 id="åº”ç”¨è¿è¡Œæ—¶ç”³è¯·æƒé™ï¼ˆé€‚ç”¨äº-Android6-0-åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰"><a href="#åº”ç”¨è¿è¡Œæ—¶ç”³è¯·æƒé™ï¼ˆé€‚ç”¨äº-Android6-0-åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰" class="headerlink" title="åº”ç”¨è¿è¡Œæ—¶ç”³è¯·æƒé™ï¼ˆé€‚ç”¨äº Android6.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰"></a>åº”ç”¨è¿è¡Œæ—¶ç”³è¯·æƒé™ï¼ˆé€‚ç”¨äº Android6.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰</h3><ul>
<li>é€šè¿‡ä¸€ä¸ªç®€å•çš„å®ä¾‹æ¥è¯´æ˜è¿‡ç¨‹<h4 id="å®ä¾‹ï¼š"><a href="#å®ä¾‹ï¼š" class="headerlink" title="å®ä¾‹ï¼š"></a>å®ä¾‹ï¼š</h4></li>
<li><p>æ‹¨æ‰“ç”µè¯ CALL<em>PHONE  </em>æƒé™ä¸ºä¾‹ </p>
<ul>
<li>æƒé™å£°æ˜<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CALL_PHONE"</span>/&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>æ‹¨æ‰“10010</p>
<ul>
<li>ä»£ç å¦‚ä¸‹ æ„å»ºä¸€ä¸ªéšå¼intent å¯åŠ¨æ‹¨æ‰“ç”µè¯<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_CALL);</div><div class="line">intent.setData(Uri.parse(<span class="string">"tel:10010"</span>));</div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li>åœ¨ä¸»ç•Œé¢ä¸Šæ·»åŠ ä¸€ä¸ªButton åœ¨å…¶onClickæ–¹æ³•ä¸­æ‹¨æ‰“ç”µè¯ï¼Œè¿è¡Œç¨‹åº!</li>
</ul>
<hr>
<ul>
<li>åœ¨Anâ€™dâ€™roid 6.0 ä»¥ä¸‹ç‰ˆæœ¬ä¸­ ç”µè¯éƒ½å¯ä»¥æ­£å¸¸æ‹¨å‡ºã€‚Android 6.0 ä»¥ä¸Šç‰ˆæœ¬ä¸­ åˆ™å¯èƒ½ä¼šåº”ç”¨å´©æºƒ/æ— ååº”ï¼ŒæŸ¥çœ‹logcatçš„æ‰“å°æ—¥å¿—å¯ä»¥çœ‹åˆ° â€œPermission Denialâ€æƒé™è¢«ç¦æ­¢çš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å°è¯•ä½¿ç”¨ è¿è¡Œæ—¶ç”³è¯·æƒé™</li>
</ul>
<hr>
<ul>
<li>æ£€æŸ¥æ˜¯å¦å·²è·å¾—æˆæƒ<br>int  checkSelfPermission(Context context, String permission)æ–¹æ³• <ul>
<li>Context context context<br>String permission  æƒé™å…·ä½“åç§°<br>æ‰“ç”µè¯å¯¹åº” Manifest.permission.CALL<em>PHONE   </em></li>
<li>æ–¹æ³•è¿”å›  PERMISSION_GRANTED  /   PERMISSION_DENIED</li>
<li>ä¾‹ç¨‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(ContextCompat.checkSelfPermission</div><div class="line">(MainActivity.<span class="keyword">this</span>,Manifest.permission.CALL_PHONE) </div><div class="line">!=PackageManager.PERMISSION_GRANTED)</div><div class="line">&#123;</div><div class="line">         ;</div><div class="line">&#125;<span class="keyword">else</span> &#123;</div><div class="line">         ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>ç”³è¯·æƒé™<br>void ActivityCompat.requestPermissions (Activity activity, String[] permissions, int requestCode)æ–¹æ³•</p>
<ul>
<li><p>Activity activity  Activityå®ä¾‹<br>String[] permissions  è¯·æ±‚æƒé™å<br>int requestCode è¯·æ±‚ç ï¼Œå¤§äº0å³å¯ï¼Œå¯¹åº”åœ¨onRequestPermissionsResult å›æ‰æ–¹æ³•ä¸­çš„requestCode</p>
</li>
<li><p>ä¾‹ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ActivityCompat.requestPermissions(MainActivity.<span class="keyword">this</span>,</div><div class="line"><span class="keyword">new</span> String[]&#123;Manifest.permission.CALL_PHONE&#125;,<span class="number">1</span> );</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>æˆæƒåå›æ‰<br>æ— è®ºç”¨æˆ·æ˜¯å¦æˆæƒéƒ½ä¼šè¿›å…¥å›æ‰æ–¹æ³•ï¼Œéœ€è¦é‡å†™è¯¥æ–¹æ³•ã€‚<br>void onRequestPermissionsResult (int requestCode, String[] permissions, int[] grantResults)æ–¹æ³•</p>
<ul>
<li><p>int requestCode    åœ¨ requestPermissions ä¸­ä¼ å…¥çš„è¯·æ±‚ç <br>String[] permissions   è¯·æ±‚çš„æƒé™ï¼Œä¸ä¸ºç©º<br>int[] grantResults        æˆæƒç»“æœ åªæœ‰ PERMISSION_GRANTED  / PERMISSION_DENIED ä¸¤ä¸ªå€¼</p>
</li>
<li><p>ä¾‹ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">    	<span class="comment">//è¯·æ±‚ç  1</span></div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">            <span class="comment">//æˆæƒç»“æœ(int) çš„ é•¿åº¦æ˜¯å¦å¤§äº0  ä¸ä¸Š æˆæƒç»“æœæ˜¯å¦ç­‰äº  PackageManager.PERMISSION_GRANTED </span></div><div class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span> &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">            <span class="comment">//æˆæƒé€šè¿‡æ‰§è¡Œ</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">//æˆæƒæ²¡æœ‰é€šè¿‡  </span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å½“ç”¨æˆ·æ‹’ç»åå†æ¬¡è¯¢é—®<br>  boolean ActivityCompat.shouldShowRequestPermissionRationale(Activity activity, String permission)             ï¼ˆçœŸå¿ƒå¤ªé•¿äº†ï¼‰</p>
<ul>
<li>Activity activity  Activityå®ä¾‹<br>String permission   æƒé™åç§°<br>åº”ç”¨ç¬¬ä¸€æ¬¡éœ€è¦æˆæƒæ—¶,ç”¨æˆ·æˆæƒï¼Œè¯¥æ–¹æ³•è¿”å›falseã€‚å½“ç”¨æˆ·æ‹’ç»æˆæƒ,ä¸‹æ¬¡éœ€è¦è¯¥æƒé™æ—¶,è¯¥æ–¹æ³•ä¼šè¿”å›true</li>
<li>ä¾‹ç¨‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale</div><div class="line">(PermissionActivity.<span class="keyword">this</span>,Manifest.permission.READ_CONTACTS))</div><div class="line">&#123;</div><div class="line"><span class="comment">//ç¬¬äºŒæ¬¡è¯¢é—®ç”¨æˆ·æ˜¯å¦æˆæƒ</span></div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line"><span class="comment">//ç”¨æˆ·ä¾æ—§æ‹’ç»åæ“ä½œ</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>ä¾‹ç¨‹æºç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">      <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">      setContentView(R.layout.activity_main);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Button</span><span class="params">(View view)</span></span>&#123;</div><div class="line">      <span class="keyword">if</span>(ContextCompat.checkSelfPermission(MainActivity.<span class="keyword">this</span>,Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED)&#123;</div><div class="line">          ActivityCompat.requestPermissions(MainActivity.<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;Manifest.permission.CALL_PHONE&#125;,<span class="number">1</span> );</div><div class="line">      &#125;<span class="keyword">else</span> &#123;</div><div class="line">          call();</div><div class="line">      &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">          Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_CALL);</div><div class="line">          intent.setData(Uri.parse(<span class="string">"tel:10010"</span>));</div><div class="line">          startActivity(intent);</div><div class="line">      &#125; <span class="keyword">catch</span> (SecurityException e) &#123;</div><div class="line">          e.printStackTrace();</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</div><div class="line">      <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">          <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">              <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span> &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                  call();</div><div class="line">              &#125; <span class="keyword">else</span> &#123;</div><div class="line">                  Toast.makeText(<span class="keyword">this</span>, <span class="string">"You denied the permission"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">break</span>;</div><div class="line">          <span class="keyword">default</span>:</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">     <span class="attr">android:onClick</span>=<span class="string">"Button"</span></div><div class="line">     <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">     <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">     <span class="attr">android:text</span>=<span class="string">"Hello World!"</span> /&gt;</div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/14/Androidç¬”è®°-æ•°æ®ä¿å­˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/14/Androidç¬”è®°-æ•°æ®ä¿å­˜/" itemprop="url">
                  Androidç¬”è®°â€”æ•°æ®ä¿å­˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-01-14T12:00:00+08:00">
                2017-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/01/14/Androidç¬”è®°-æ•°æ®ä¿å­˜/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/01/14/Androidç¬”è®°-æ•°æ®ä¿å­˜/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/01/14/Androidç¬”è®°-æ•°æ®ä¿å­˜/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”æ•°æ®ä¿å­˜">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,482
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  6m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3 </li>
</ul>
<hr>
<h2 id="Android-ä¸­çš„ä¸»è¦æ•°æ®å­˜å‚¨"><a href="#Android-ä¸­çš„ä¸»è¦æ•°æ®å­˜å‚¨" class="headerlink" title="Android ä¸­çš„ä¸»è¦æ•°æ®å­˜å‚¨"></a>Android ä¸­çš„ä¸»è¦æ•°æ®å­˜å‚¨</h2><ul>
<li><p>æœ‰ä¸‰ç§</p>
</li>
<li><p>ä¿å­˜é”®å€¼é›†<br> è¦ä¿å­˜çš„ç›¸å¯¹è¾ƒå°é”®å€¼é›†åˆï¼Œä½¿ç”¨ SharedPreferences</p>
</li>
<li><p>ä¿å­˜æ–‡ä»¶<br>ä½¿ç”¨ Android æ–‡ä»¶ç³»ç»Ÿé€šè¿‡ File API è¯»å–å’Œå†™å…¥æ–‡ä»¶ï¼Œé€‚åˆæŒ‰å¼€å§‹åˆ°ç»“æŸçš„é¡ºåºä¸è·³è¿‡åœ°è¯»å–æˆ–å†™å…¥å¤§é‡æ•°æ®ã€‚ ä¾‹å¦‚ï¼Œå›¾ç‰‡æ–‡ä»¶æˆ–é€šè¿‡ç½‘ç»œäº¤æ¢çš„ä»»ä½•å†…å®¹</p>
</li>
<li><p>åœ¨ SQL æ•°æ®åº“ä¸­ä¿å­˜æ•°æ®<br>Androidå†…å»ºçš„SQLite æ•°æ®åº“å­˜å‚¨é‡å¤æˆ–ç»“æ„åŒ–æ•°æ®</p>
</li>
</ul>
<hr>
<ul>
<li>PSï¼šè¿™é‡Œå¦‚æœæ²¡æœ‰å­¦è¿‡ SQL æ•°æ®åº“ä½¿ç”¨ï¼Œæ¨èLitePal</li>
<li>Androidå¼€æºæ•°æ®åº“<a href="https://github.com/LitePalFramework/LitePal#latest-downloads/" target="_blank" rel="external">LitePal</a>  ï¼šéƒ­éœ–(ç¬¬ä¸€è¡Œä»£ç ä½œè€…)</li>
<li>è¯¦ç»†ä»‹ç»åœ¨è¿™é‡Œ<a href="http://www.jianshu.com/p/557682e0a9f0" target="_blank" rel="external">ï¼ˆæ‡’äººå¿…å¤‡ï¼‰Androidå¼€æºæ•°æ®åº“LitePal</a></li>
</ul>
<hr>
<h3 id="ä¿å­˜é”®å€¼é›†"><a href="#ä¿å­˜é”®å€¼é›†" class="headerlink" title="ä¿å­˜é”®å€¼é›†"></a>ä¿å­˜é”®å€¼é›†</h3><ul>
<li>æƒ³è¦ä¿å­˜çš„ç›¸å¯¹è¾ƒå°é”®å€¼é›†åˆ</li>
<li><p>è°ƒç”¨SharedPreferences</p>
</li>
<li><p>é¦–å…ˆï¼šè·å–SharedPreferencesçš„å¥æŸ„<br>ç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªå…±äº«å‚æ•°æ–‡ä»¶æˆ–è®¿é—®ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å…±äº«å‚æ•°æ–‡ä»¶ã€‚<br>å…·ä½“é€”å¾„æœ‰ä¸‰æ¡</p>
<ul>
<li><p>getSharedPreferences (String name, int mode)</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šSharedPreferencesçš„åç§°ï¼Œç¬¬äºŒä¸ªï¼šå‚æ•°æŒ‡å®šæ“ä½œæ¨¡å¼</li>
<li>éœ€è¦åˆ›å»º/è¯»å– å¤šä¸ªå…±äº«å‚æ•°æ–‡ä»¶æ—¶ä½¿ç”¨ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ‹¥æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ ‡è¯†ç¬¦é€šè¿‡è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°è·å¾—å…±äº«å‚æ•°å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡APPä¸­çš„ä»»æ„Contextå¯¹è±¡è°ƒç”¨å®ƒã€‚</li>
<li>ç¤ºä¾‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æŒ‡å®šSharedPreferencesåç§°ä¸ºdata  æ¨¡å¼ä¸ºMODE_PRIVATEï¼šåªæœ‰å½“å‰ç¨‹åºæ‰æœ‰æƒé™è¯»å–/ä¿®æ”¹</span></div><div class="line">SharedPreferences sharedPref = getSharedPreferences(<span class="string">"data"</span>, MODE_PRIVATE);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>getPreferences (int mode)</p>
<ul>
<li>å‚æ•°ï¼šæŒ‡å®šæ“ä½œæ¨¡å¼</li>
<li>åªåˆ›å»º Activity çš„ä¸€ä¸ªSharedPreferencesã€‚åœ¨Activity ä¸­ä½¿ç”¨ã€‚ æ–¹æ³•ä¼šæ£€ç´¢å±äºè¯¥ Activity çš„é»˜è®¤å…±äº«é¦–é€‰é¡¹æ–‡ä»¶ï¼Œæ— éœ€æä¾›åç§°</li>
<li>ç¤ºä¾‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ¨¡å¼ï¼šMODE_PRIVATEï¼šåªæœ‰å½“å‰ç¨‹åºæ‰æœ‰æƒé™è¯»å–/ä¿®æ”¹</span></div><div class="line">SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>getDefaultSharedPreferences(context)</p>
<ul>
<li>å‚æ•°ï¼šcontext</li>
<li>è‡ªåŠ¨ä»¥æ¡£æœŸåº”ç”¨ç¨‹åºåŒ…åä½œä¸ºå‰ç¼€å‘½åSharedPreferencesæ–‡ä»¶</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>å†™å…¥æ•°æ®åˆ°å…±äº«å‚æ•°ä¸­<ul>
<li>SharedPreferences è°ƒç”¨ edit() åˆ›å»ºä¸€ä¸ª SharedPreferences.Editor<br>ä½¿ç”¨è¯¸å¦‚ putInt() å’Œ putString() æ–¹æ³•å†™å…¥çš„é”®å’Œå€¼<br>æœ€åè°ƒç”¨commit() ä»¥ä¿å­˜æ›´æ”¹<br>ä¹Ÿå¯è°ƒç”¨apply() ä¿å­˜æ›´æ”¹</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>commit() ä¸ apply() ç›¸åŒ/åŒºåˆ«</li>
<li>ç›¸åŒ<ul>
<li>éƒ½æ˜¯æäº¤preferenceä¿®æ”¹æ•°æ®</li>
</ul>
</li>
<li>åŒºåˆ«<ul>
<li>applyæ²¡æœ‰è¿”å›å€¼  commitè¿”å›booleanè¡¨æ˜ä¿®æ”¹æ˜¯å¦æäº¤æˆåŠŸ</li>
<li>applyæ˜¯å°†æ“ä½œæäº¤åˆ°å†…å­˜ï¼Œè€Œåå¼‚æ­¥çœŸæ­£æäº¤åˆ°æ–‡ä»¶<br> commitæ˜¯åŒæ­¥çš„æäº¤åˆ°æ–‡ä»¶<br> å¤šä¸ªcommitåŒæ—¶æäº¤ï¼Œäº’ç›¸ç­‰å¾…ï¼Œæ•ˆç‡è¾ƒä½<br> applyç›´æ¥è¦†ç›–ï¼Œæ•ˆç‡è¾ƒé«˜<ul>
<li>applyæ²¡æœ‰ä»»ä½•é”™è¯¯æç¤ºï¼Œåªæ˜¯æäº¤çš„åŠ¨ä½œ</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>ç¤ºä¾‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åˆ›å»º .edit()</span></div><div class="line">SharedPreferences.Editor editor = sharedPref.edit();</div><div class="line"><span class="comment">//å†™å…¥å­—ç¬¦ä¸²ã€‚key-å€¼ TextView</span></div><div class="line">editor.putString(<span class="string">"TextView"</span>,<span class="string">"hello"</span>);</div><div class="line"><span class="comment">//ä¿å­˜æ›´æ”¹</span></div><div class="line">editor.commit();</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>ä»å…±äº«å‚æ•°ä¸­è¯»å–æ•°æ®<ul>
<li>è·å–SharedPreferencesçš„å¥æŸ„<br>æ–¹å¼åŒä¸Š</li>
<li>è°ƒç”¨æ¯”å¦‚getInt()æˆ–getString()æ–¹æ³•ï¼Œç„¶åä¼ å…¥é”®å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤å€¼</li>
<li>ç¤ºä¾‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è·å–SharedPreferencesçš„å¥æŸ„</span></div><div class="line">SharedPreferences sharedPreferences = getSharedPreferences(<span class="string">"data"</span>,MODE_PRIVATE);</div><div class="line"><span class="comment">//è¯»å–é”®å€¼å¯¹åº”æ•°æ®</span></div><div class="line">String text = sharedPreferences.getString(<span class="string">"TextView"</span>,<span class="string">""</span>);</div><div class="line"><span class="comment">//æ‰“å°åˆ°logä¸­ éªŒè¯</span></div><div class="line">Log.d(<span class="string">"data"</span>,text);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="ä¿å­˜åˆ°æ–‡ä»¶"><a href="#ä¿å­˜åˆ°æ–‡ä»¶" class="headerlink" title="ä¿å­˜åˆ°æ–‡ä»¶"></a>ä¿å­˜åˆ°æ–‡ä»¶</h3><ul>
<li>Android è®¾å¤‡æœ‰ä¸¤ä¸ªæ–‡ä»¶å­˜å‚¨åŒºåŸŸï¼š å†…éƒ¨å­˜å‚¨ å’Œ å¤–éƒ¨å­˜å‚¨<br>Android è®¾å¤‡æ—©æœŸå†…ç½®çš„éæ˜“å¤±æ€§å†…å­˜ï¼ˆå†…éƒ¨å­˜å‚¨ï¼‰ï¼Œä»¥åŠç§»åŠ¨å­˜å‚¨ä»‹è´¨ å¾®å‹ SD å¡ç­‰ï¼ˆå¤–éƒ¨å­˜å‚¨ï¼‰<br>ä»»ä½•Androidè®¾å¤‡å§‹ç»ˆæœ‰ä¸¤ä¸ªå­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”æ— è®ºå¤–éƒ¨å­˜å‚¨è®¾å¤‡æ˜¯å¦å¯ç§»åŠ¨ï¼ŒAPI çš„è¡Œä¸ºå‡ä¸€è‡´</li>
</ul>
<ul>
<li>Androidçš„æ–‡ä»¶å­˜å‚¨æ˜¯ä»¥javaæµä¸ºåŸºç¡€ï¼Œå¹¶ä¼˜åŒ–äº†ä¸€äº›æ“ä½œã€‚javaæµä¸å±äºæœ¬æ–‡èŒƒå›´ã€‚</li>
<li>æ¶‰åŠjavaæµéƒ¨åˆ†å‚è€ƒ<a href="http://androidtoast.iteye.com/blog/1172673" target="_blank" rel="external">Androidæ–‡ä»¶IOè¯¦è§£</a></li>
</ul>
<h4 id="å†…éƒ¨å­˜å‚¨"><a href="#å†…éƒ¨å­˜å‚¨" class="headerlink" title="å†…éƒ¨å­˜å‚¨"></a>å†…éƒ¨å­˜å‚¨</h4><h4 id="ä¿å­˜åˆ°å†…éƒ¨å­˜å‚¨"><a href="#ä¿å­˜åˆ°å†…éƒ¨å­˜å‚¨" class="headerlink" title="ä¿å­˜åˆ°å†…éƒ¨å­˜å‚¨"></a>ä¿å­˜åˆ°å†…éƒ¨å­˜å‚¨</h4><ul>
<li>æŸä¸€åº”ç”¨å¯¹å…¶å†…éƒ¨å­˜å‚¨ å§‹ç»ˆå…·æœ‰ è¿›è¡Œè¯»å†™çš„æƒé™ï¼Œè€Œæ— éœ€å£°æ˜ä»»ä½•æƒé™ï¼Œåœ¨ Android Nä¹‹å‰ï¼Œå†…éƒ¨æ–‡ä»¶å¯ä»¥é€šè¿‡æ”¾å®½æƒé™è®©å…¶ä»–åº”ç”¨è®¿é—®ã€‚<strong>ä½†æ˜¯æä¸æ¨èä»¥è¿™ç§æ–¹å¼å…±äº«æ–‡ä»¶</strong></li>
</ul>
<ul>
<li><p>ç®€å•å®ä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(String inputText)</span></span>&#123;</div><div class="line">      <span class="comment">//æ–°å»ºä¸€ä¸ªFileOutputStreamå¯¹è±¡(å­—èŠ‚æµ)</span></div><div class="line">      FileOutputStream out = <span class="keyword">null</span>;</div><div class="line">      <span class="comment">//æ–°å»ºä¸€ä¸ªBufferedWriter (å­—ç¬¦æµ)</span></div><div class="line">      BufferedWriter writer = <span class="keyword">null</span>;</div><div class="line">      <span class="keyword">try</span>&#123;</div><div class="line">          <span class="comment">//out å®ä¾‹åŒ–</span></div><div class="line">          out = openFileOutput(<span class="string">"data"</span>,Context.MODE_PRIVATE);</div><div class="line">          <span class="comment">//OutputStreamWrit  å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµ</span></div><div class="line">          <span class="comment">//å­—ç¬¦æµç»‘å®šBufferedWriter(ç¼“å†²åŒº)</span></div><div class="line">          writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(out));</div><div class="line">          <span class="comment">//å†™å…¥åˆ°æ–‡ä»¶</span></div><div class="line">          writer.write(inputText);</div><div class="line">      &#125;<span class="keyword">catch</span> (IOException e )&#123;</div><div class="line">          e.printStackTrace();</div><div class="line">      &#125; <span class="keyword">finally</span> &#123;</div><div class="line">          <span class="keyword">try</span>&#123;</div><div class="line">              <span class="comment">//å¦‚æœå†™å…¥æˆåŠŸ</span></div><div class="line">              <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</div><div class="line">              	<span class="comment">//å…³é—­æµ</span></div><div class="line">                  writer.close();</div><div class="line">              &#125;</div><div class="line">          &#125;<span class="keyword">catch</span> (IOException e)&#123;</div><div class="line">              e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>FileOutputStreamï¼š</p>
<ul>
<li>ç»§æ‰¿è‡ª OutputStream ç”¨äºæ–‡ä»¶å¤„ç†çš„èŠ‚ç‚¹æµ</li>
<li>ç”¨äºå†™å…¥åŸå§‹å­—èŠ‚æµåˆ°æ–‡ä»¶</li>
</ul>
</li>
<li><p>FileOutputStream openFileOutput (String name, int mode)</p>
<ul>
<li>è¿”å›FileOutputStreamå¯¹è±¡</li>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶å</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ“ä½œæ¨¡å¼ï¼Œæœ‰4ç§å–å€¼<ul>
<li>MODE<em>PRIVATE(é»˜è®¤)</em>å½“åŒä¸€æ–‡ä»¶åå­˜åœ¨æ—¶è¦†ç›–åŸæ–‡ä»¶</li>
<li>MODE<em>APPEND  </em>å½“åŒåæ–‡ä»¶å­˜åœ¨æ—¶ï¼Œåœ¨åŸæ–‡ä»¶æœ«å°¾è¿½åŠ </li>
<li>å…¶ä½™ä¸¤ç§å‡åœ¨android4.2åŠä»¥ä¸Šç‰ˆæœ¬ä¸­åºŸå¼ƒ</li>
</ul>
</li>
</ul>
</li>
<li><p>OutputStreamWrit</p>
<ul>
<li>ç»§æ‰¿è‡ª Writer </li>
<li>å°†å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµ</li>
</ul>
</li>
<li><p>BufferedWriter </p>
<ul>
<li>ç»§æ‰¿è‡ªWriter </li>
<li>ç»‘å®šå­—ç¬¦è¾“å‡ºæµï¼Œæé«˜å…·ä½“çš„æµå¯¹è±¡çš„æ•ˆç‡</li>
<li>.flush()æ–¹æ³• å¯¹ç¼“å†²åŒºè¿›è¡Œåˆ·æ–°ï¼Œè®©æ•°æ®åˆ°ç›®çš„åœ°</li>
<li>.close();æ–¹æ³• å…³é—­ç¼“å†²åŒºï¼Œå³å…³é—­ç»‘å®šçš„æµ</li>
</ul>
</li>
</ul>
<h5 id="ä»å†…éƒ¨å­˜å‚¨è¯»å–æ–‡ä»¶"><a href="#ä»å†…éƒ¨å­˜å‚¨è¯»å–æ–‡ä»¶" class="headerlink" title="ä»å†…éƒ¨å­˜å‚¨è¯»å–æ–‡ä»¶"></a>ä»å†…éƒ¨å­˜å‚¨è¯»å–æ–‡ä»¶</h5><ul>
<li><p>ç®€å•å®ä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">load</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="comment">//æ–°å»ºFileInputStreamå¯¹è±¡</span></div><div class="line">     FileInputStream in = <span class="keyword">null</span>;</div><div class="line">     <span class="comment">//æ–°å»º BufferedReaderå¯¹è±¡</span></div><div class="line">     BufferedReader reader = <span class="keyword">null</span>;</div><div class="line">     <span class="comment">//æ–°å»ºä¸€ä¸ªStringBuilder ç©º</span></div><div class="line">      content = <span class="keyword">new</span> StringBuilder();</div><div class="line">     <span class="keyword">try</span>&#123;</div><div class="line">     	<span class="comment">//FileInputStreamå¯¹è±¡å®ä¾‹åŒ–</span></div><div class="line">         in = openFileInput(<span class="string">"data"</span>);</div><div class="line">         <span class="comment">//å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµ</span></div><div class="line">         <span class="comment">//ç¼“å†²æµç»‘å®šå­—ç¬¦æµ</span></div><div class="line">         reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in));</div><div class="line">         <span class="comment">//ç©º String</span></div><div class="line">         String line = <span class="string">""</span>;</div><div class="line">         <span class="comment">//è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦è¯»å–å®Œæˆ</span></div><div class="line">         <span class="keyword">while</span>((line = reader.readLine())!=<span class="keyword">null</span>)&#123;</div><div class="line">         	<span class="comment">//è¯»å–å†…å®¹æ·»åŠ åˆ° StringBuilder å¯¹è±¡ä¸­   </span></div><div class="line">             content.append(line);</div><div class="line">         &#125;</div><div class="line">     &#125;<span class="keyword">catch</span> (IOException e)&#123;</div><div class="line">         e.printStackTrace();</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">finally</span> &#123;</div><div class="line">         <span class="keyword">if</span>(reader != <span class="keyword">null</span>)&#123;</div><div class="line">             <span class="keyword">try</span>&#123;</div><div class="line">             	<span class="comment">//å…³é—­æµ</span></div><div class="line">                 reader.close();</div><div class="line">             &#125;<span class="keyword">catch</span> (IOException e)&#123;</div><div class="line">                 e.printStackTrace();</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line">     <span class="comment">//å°†è¯»å–ç»“æœ ç”±StringBuilderè½¬æ¢ä¸ºString å¹¶è¿”å›</span></div><div class="line">     <span class="keyword">return</span> content.toString();</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>FileInputStream</p>
<ul>
<li>ç»§æ‰¿è‡ª InputStreamï¼Œç”¨äºæ–‡ä»¶å¤„ç†çš„èŠ‚ç‚¹æµ</li>
<li>ä»æ–‡ä»¶ä¸­è¯»å–</li>
</ul>
</li>
<li><p>FileInputStream openFileInput(String filename)</p>
<ul>
<li>è¿”å›FileInputStreamå¯¹è±¡</li>
<li>å‚æ•°ä¸º è¯»å–çš„æ–‡ä»¶å</li>
</ul>
</li>
<li><p>InputStreamRead</p>
<ul>
<li>å°†å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµ</li>
</ul>
</li>
<li><p>BufferedReader</p>
<ul>
<li>ç¼“å†²æµ</li>
</ul>
</li>
</ul>
<h4 id="å¤–éƒ¨å­˜å‚¨"><a href="#å¤–éƒ¨å­˜å‚¨" class="headerlink" title="å¤–éƒ¨å­˜å‚¨"></a>å¤–éƒ¨å­˜å‚¨</h4><ul>
<li>å å‘</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/31/2016æ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/31/2016æ€»ç»“/" itemprop="url">
                  2016æ€»ç»“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-31T12:00:11+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/éš/" itemprop="url" rel="index">
                    <span itemprop="name">éš</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/31/2016æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/31/2016æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/12/31/2016æ€»ç»“/" class="leancloud_visitors" data-flag-title="2016æ€»ç»“">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  169
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="2016"><a href="#2016" class="headerlink" title="2016"></a>2016</h3><ul>
<li>æ‰¾åˆ°äº†å…´è¶£-Androidå¼€å§‹æ­£å¼å­¦ä¹ ã€‚</li>
<li>æ­å»ºäº†è‡ªå·±çš„blogï¼Œè™½ç„¶å‘¨å›´äººæ²¡äººå…³æ³¨ï¼Œæœ‰ä¸€ç¯‡æ—¥å­çš„é˜…è¯»é‡è¿‡äº†1ä¸‡ï¼Œè¿˜æ˜¯å¾ˆæƒŠå–œçš„</li>
<li>åµŒå…¥å¼å·¥ä½œæ²¡ç”¨æ‰¾åˆ°æ»¡æ„çš„ï¼Œåªèƒ½è¯´ç­‰æ˜¥æ‹› Andoidçš„å®ä¹ ï¼Œè¿™æ®µæ—¶é—´åŠªåŠ›æé«˜è‡ªå·±ï¼Œ</li>
<li>æ”¾å¼ƒäº†è€ƒç ”</li>
<li>å¿ƒæƒ…èµ°è¿‡äº†ç±»ä¼¼æŠ‘éƒçš„ç»å†ï¼Œå¯¹ä½“åˆ¶ç§ç§å„æœ‰çœ‹æ³•ï¼Œæ˜¯å¯¹æ˜¯é”™ï¼Œè®©æ—¶é—´è§è¯</li>
</ul>
<hr>
<h3 id="2017"><a href="#2017" class="headerlink" title="2017"></a>2017</h3><ul>
<li>å¸Œæœ›æœ‰è‡ªå·±çš„æ”¶å…¥ï¼Œç»æµç›¸å¯¹è‡ªç”±ä¸€ç‚¹</li>
<li>è°ˆä¸€æ®µæ‹çˆ±ï¼Œé‡åˆ°åˆé€‚çš„å¥³å­©å§</li>
<li>Androidçš„è·¯ä¸Šï¼Œé¡ºåˆ©ä¸€ç‚¹å§</li>
<li>ä¸ç»™è‡ªå·±è®¾å®šé™åˆ¶ï¼Œèµ°ä¸€æ­¥å†èµ°ä¸€æ­¥</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/25/Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/25/Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦/" itemprop="url">
                  Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-25T12:00:00+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/25/Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/25/Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/12/25/Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦/" class="leancloud_visitors" data-flag-title="Android Studioä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  326
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li><a href="http://www.jianshu.com/p/1c878c10a6bb" target="_blank" rel="external">http://www.jianshu.com/p/1c878c10a6bb</a></li>
<li><a href="http://www.jianshu.com/p/9b8ef61b7cdb" target="_blank" rel="external">http://www.jianshu.com/p/9b8ef61b7cdb</a></li>
<li><a href="http://www.jianshu.com/p/64d9a52aebbf" target="_blank" rel="external">http://www.jianshu.com/p/64d9a52aebbf</a></li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3</li>
</ul>
<p>å¯¼è¯­</p>
<ul>
<li>ssdç›˜å®¹é‡ä¸å¤Ÿäº†ï¼Œé‡è£…ç³»ç»Ÿï¼Œéšä¾¿é‡æ–°å®‰è£…äº†Android Studio è®°å½•ä¸€è¾¹ä¼˜åŒ–è¿‡ç¨‹</li>
</ul>
<hr>
<h2 id="æœ€é‡è¦çš„-æœ‰ä¸€ä¸ªè‰¯å¥½çš„æ¢¯å­-å…¨å±€ç¿»å¢™"><a href="#æœ€é‡è¦çš„-æœ‰ä¸€ä¸ªè‰¯å¥½çš„æ¢¯å­-å…¨å±€ç¿»å¢™" class="headerlink" title="æœ€é‡è¦çš„ æœ‰ä¸€ä¸ªè‰¯å¥½çš„æ¢¯å­+å…¨å±€ç¿»å¢™"></a>æœ€é‡è¦çš„ æœ‰ä¸€ä¸ªè‰¯å¥½çš„æ¢¯å­+å…¨å±€ç¿»å¢™</h2><ul>
<li>å¤§éƒ¨åˆ†Android Studioå®‰è£…çš„é—®é¢˜,å°±åŸºæœ¬ä¸ä¼šå‡ºç°</li>
</ul>
<h4 id="å¼€å¯gradleå•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹"><a href="#å¼€å¯gradleå•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å¼€å¯gradleå•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹"></a>å¼€å¯gradleå•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹</h4><ul>
<li><p>åœ¨C:\Users.gradleç›®å½•(userç›®å½•å³å½“å‰ç”¨æˆ·ä¸åŒç”µè„‘ä¸€èˆ¬ä¸åŒ)ä¸‹æ–°å»º gradle.propertiesæ–‡ä»¶<br>å¤åˆ¶ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">org.gradle.daemon=true  </div><div class="line">org.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=800m  </div><div class="line">-XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</div><div class="line">org.gradle.parallel=true  </div><div class="line">org.gradle.configureondemand=true</div></pre></td></tr></table></figure>
<p>åº”è¯¥æ˜¯å¢å¤§äº†gradle è¿è¡Œçš„ java è™šæ‹Ÿæœºçš„å¤§å°ï¼Œæˆ‘çš„ç”µè„‘æ˜¯8gå†…å­˜ï¼Œè¿™ä¸ªé…ç½®æ•ˆæœæœ€å¥½</p>
</li>
</ul>
<h4 id="æ‰©å¤§Android-Studio-è¿è¡Œå†…å­˜"><a href="#æ‰©å¤§Android-Studio-è¿è¡Œå†…å­˜" class="headerlink" title="æ‰©å¤§Android Studio è¿è¡Œå†…å­˜"></a>æ‰©å¤§Android Studio è¿è¡Œå†…å­˜</h4><ul>
<li><p>æ‰¾åˆ°Android Studioå®‰è£…ç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹<br>æ‰¾åˆ°studio64.exe.vmoptionså’Œstudio.exe.vmoptionsæ–‡ä»¶(64ä½)<br>studio.exe.vmoptionså’Œstudio.exe.vmoptionsæ–‡ä»¶(32ä½)</p>
</li>
<li><p>åˆ†åˆ«ç¼–è¾‘æ–‡ä»¶,æ”¹åŠ¨3ä¸ªåœ°æ–¹å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-Xms1024m</div><div class="line">-Xmx2048m</div><div class="line">-XX:MaxPermSize=800m</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Android-Studio-è®¾ç½®"><a href="#Android-Studio-è®¾ç½®" class="headerlink" title="Android Studio è®¾ç½®"></a>Android Studio è®¾ç½®</h4><ul>
<li><p>Command-line Optionä¸å¡«<br><img src="http://cdn2.snapgram.co/imgs/2016/12/25/ScreenShot_20161225224242.png" alt="ScreenShot_20161225224242.png"></p>
</li>
<li><p>gradle ç¦»çº¿æ¨¡å¼<br>å‹¾é€‰Office Workï¼Œæˆ‘è¿™é‡Œæµ‹è¯•æ˜¯é€Ÿåº¦åŸºæœ¬ä¸å˜ï¼Œä½†æ˜¯ç½‘ä¸Šæœ‰äººæµ‹è¯•æ˜¯æ•ˆæœç›¸å·®å¾ˆå¤šï¼ŒåŸå› ä¸æ˜ï¼Œå¯èƒ½æ˜¯ç½‘ç»œä¸€ç›´å…¨å±€ç¿»å¢™çš„å…³ç³»<br><img src="http://cdn1.snapgram.co/imgs/2016/12/25/ScreenShot_20161225224455.png" alt="ScreenShot_20161225224455.png"></p>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/23/Androidç¬”è®°-Broadcastå¹¿æ’­/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/23/Androidç¬”è®°-Broadcastå¹¿æ’­/" itemprop="url">
                  Androidç¬”è®°â€”Broadcastå¹¿æ’­
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-23T12:00:00+08:00">
                2016-12-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/23/Androidç¬”è®°-Broadcastå¹¿æ’­/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/23/Androidç¬”è®°-Broadcastå¹¿æ’­/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/12/23/Androidç¬”è®°-Broadcastå¹¿æ’­/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”Broadcastå¹¿æ’­">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  2,632
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  11m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3</li>
</ul>
<hr>
<h2 id="BroadcastReceiveråŸºç¡€"><a href="#BroadcastReceiveråŸºç¡€" class="headerlink" title="BroadcastReceiveråŸºç¡€"></a>BroadcastReceiveråŸºç¡€</h2><ul>
<li>é¦–å…ˆç¥­å‡ºå®˜æ–¹æ–‡æ¡£åŠ<strong>ä¸­æ–‡ç¿»è¯‘</strong><blockquote>
<p><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html" target="_blank" rel="external">https://developer.android.com/reference/android/content/BroadcastReceiver.html</a><br><a href="http://www.jianshu.com/p/1b56172b0c77" target="_blank" rel="external">http://www.jianshu.com/p/1b56172b0c77</a></p>
</blockquote>
</li>
</ul>
<h3 id="BroadcastReceiveræ¦‚è¿°"><a href="#BroadcastReceiveræ¦‚è¿°" class="headerlink" title="BroadcastReceiveræ¦‚è¿°"></a>BroadcastReceiveræ¦‚è¿°</h3><ol>
<li><a href="http://www.cnblogs.com/qiuscut/articles/2212064.html" target="_blank" rel="external">@åˆ«è·¯å¯»å¿†</a><br>Androidä¸­çš„å››å¤§ç»„ä»¶æ˜¯ Activityã€Serviceã€Broadcastå’ŒContent Providerã€‚è€ŒIntentæ˜¯ä¸€ä¸ªå¯¹åŠ¨ä½œå’Œè¡Œä¸ºçš„æŠ½è±¡æè¿°ï¼Œè´Ÿè´£ç»„ä»¶ä¹‹é—´ç¨‹åºä¹‹é—´è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚é‚£ä¹ˆBroadcast Receiverç»„ä»¶å°±æä¾›äº†ä¸€ç§æŠŠIntentä½œä¸ºä¸€ä¸ªæ¶ˆæ¯å¹¿æ’­å‡ºå»ï¼Œç”±æ‰€æœ‰å¯¹å…¶æ„Ÿå…´è¶£çš„ç¨‹åºå¯¹å…¶ä½œå‡ºååº”çš„æœºåˆ¶ã€‚</li>
<li><p><a href="http://blog.csdn.net/zuolongsnail/article/details/6450156" target="_blank" rel="external">@zuolongsnailä¸“æ </a></p>
<ul>
<li><p>å¹¿æ’­æ¥æ”¶å™¨æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ¥æ”¶å¹¿æ’­é€šçŸ¥ä¿¡æ¯ï¼Œå¹¶åšå‡ºå¯¹åº”å¤„ç†çš„ç»„ä»¶ã€‚å¾ˆå¤šå¹¿æ’­æ˜¯æºè‡ªäºç³»ç»Ÿä»£ç çš„â”€â”€æ¯”å¦‚ï¼Œé€šçŸ¥æ—¶åŒºæ”¹å˜ã€ç”µæ± ç”µé‡ä½ã€æ‹æ‘„äº†ä¸€å¼ ç…§ç‰‡æˆ–è€…ç”¨æˆ·æ”¹å˜äº†è¯­è¨€é€‰é¡¹ã€‚åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥è¿›è¡Œå¹¿æ’­â”€â”€æ¯”å¦‚è¯´ï¼Œé€šçŸ¥å…¶å®ƒåº”ç”¨ç¨‹åºä¸€äº›æ•°æ®ä¸‹è½½å®Œæˆå¹¶å¤„äºå¯ç”¨çŠ¶æ€ã€‚</p>
</li>
<li><p>åº”ç”¨ç¨‹åºå¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„å¹¿æ’­æ¥æ”¶å™¨ä»¥å¯¹æ‰€æœ‰å®ƒæ„Ÿå…´è¶£çš„é€šçŸ¥ä¿¡æ¯äºˆä»¥å“åº”ã€‚æ‰€æœ‰çš„æ¥æ”¶å™¨å‡ç»§æ‰¿è‡ªBroadcastReceiveråŸºç±»ã€‚</p>
</li>
<li><p>å¹¿æ’­æ¥æ”¶å™¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæ¥å“åº”å®ƒä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæˆ–è€…ç”¨NotificationManageræ¥é€šçŸ¥ç”¨æˆ·ã€‚é€šçŸ¥å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›â”€â”€é—ªåŠ¨èƒŒç¯ã€éœ‡åŠ¨ã€æ’­æ”¾å£°éŸ³ç­‰ç­‰ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯åœ¨çŠ¶æ€æ ä¸Šæ”¾ä¸€ä¸ªæŒä¹…çš„å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å®ƒå¹¶è·å–æ¶ˆæ¯ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 id="å¹¿æ’­åˆ†ç±»"><a href="#å¹¿æ’­åˆ†ç±»" class="headerlink" title="å¹¿æ’­åˆ†ç±»"></a>å¹¿æ’­åˆ†ç±»</h3><ul>
<li>è§¦å‘å¹¿æ’­å‘ç”Ÿçš„äº‹ä»¶åˆ†ç±»æœ‰ä¸¤ç§<ol>
<li>Androidç³»ç»Ÿå¹¿æ’­äº‹ä»¶<br> ç”±androidè®¾å¤‡çŠ¶æ€å˜åŒ–è€Œè§¦å‘çš„ç³»ç»Ÿå¹¿æ’­å¦‚ï¼š<br> Intent.ACTION_POWER_CONNECTED;<br> //æ’ä¸Šå¤–éƒ¨ç”µæºæ—¶å‘å‡ºçš„å¹¿æ’­<br> Intent.ACTION_SCREEN_ON;<br> //å±å¹•è¢«æ‰“å¼€ä¹‹åçš„å¹¿æ’­<br> ACTION_TIME_CHANGED<br>//ç³»ç»Ÿæ—¶é—´æ”¹å˜è€Œè§¦å‘çš„å¹¿æ’­</li>
<li>è‡ªå®šä¹‰çš„å¹¿æ’­äº‹ä»¶<br> è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£äº†ï¼Œæ¯”å¦‚qqå½“æˆ‘ä»¬å†å¦å¤–ä¸€å°æ‰‹æœºä¸Šç™»é™†æ—¶ï¼Œæ‰‹å¤´çš„è¿™ä¸ªæ‰‹æœºqqå°±ä¼šè‡ªåŠ¨ä¸‹çº¿ã€‚è…¾è®¯çš„æœåŠ¡å™¨é€šè¿‡åå°æœåŠ¡å¯ç”¨äº†è‡ªå®šä¹‰å¹¿æ’­æ¥ç»ˆç»“æ­£åœ¨è¿è¡Œçš„Activityï¼Œè¯¦æƒ…ä¹‹åä¼šæœ‰ä¾‹ç¨‹ï¼Œä¸å†ç´¯èµ˜ã€‚</li>
</ol>
</li>
<li><p>èƒ½å¤Ÿè¢«æ¥æ”¶çš„å¹¿æ’­ç±»å‹</p>
<ol>
<li><p>æ™®é€šå¹¿æ’­ï¼ˆNormal broadcastsï¼‰ï¼š<br> ï¼ˆç”± Context.sendBroadcastå‘å‡ºï¼‰å¼‚æ­¥å‘å‡ºã€‚æ‰€æœ‰å¹¿æ’­æ¥æ”¶å™¨éƒ½å¯ä»¥åœ¨åŒä¸€æ—¶é—´æ¥æ”¶å¹¿æ’­ã€‚å¹¿æ’­æ¥æ”¶è€…æ— æ³•æ¥æ”¶å¹¿æ’­çš„å¤„ç†ç»“æœæˆ–è€…é˜»æ–­å¹¿æ’­çš„ä¼ é€’ã€‚</p>
</li>
<li><p>æœ‰åºå¹¿æ’­ï¼ˆOrdered broadcastsï¼‰ï¼š<br> ï¼ˆç”± Context.sendOrderedBroadcastå‘å‡ºï¼‰æ¯æ¬¡åªå‘é€ç»™ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ã€‚å½“æ¯ä¸ªå¹¿æ’­æ¥æ”¶å™¨ä¾æ¬¡æ‰§è¡Œæ—¶ï¼Œå®ƒå¯ä»¥å‘ä¸‹ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ä¼ æ’­ç»“æœï¼Œæˆ–è€…é˜»æ–­è¯¥å¹¿æ’­ï¼Œä½¿å¾—è¯¥å¹¿æ’­ä¸èƒ½è¢«ä¸‹ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨æ¥æ”¶åˆ°ã€‚</p>
</li>
</ol>
<ul>
<li>é€šä¿—è§£é‡Šï¼š<br>  æ™®é€šå¹¿æ’­å°±ç›¸å½“äºå°åŒº/æ‘å§”ä¼šçš„å¤§å–‡å­ï¼Œæœ‰äº‹å‘ç”Ÿï¼ˆè§¦å‘å¹¿æ’­ï¼‰é€šçŸ¥æ‰€æœ‰çš„äººï¼ˆå¹¿æ’­æ¥æ”¶å™¨ï¼‰ï¼Œå…¨åŠŸç‡çš„å¤§å–Šå¤§å«ç¡®ä¿æ‰€æœ‰äººï¼ˆå¹¿æ’­æ¥æ”¶å™¨ï¼‰éƒ½èƒ½å¬åˆ°ã€‚è€Œæœ‰äººï¼ˆå¹¿æ’­æ¥æ”¶å™¨ï¼‰åœ¨ç¡è§‰è¢«åµé†’ä½†æ˜¯åˆæ²¡åŠæ³•ç ¸äº†é‚£ä¸ªå¤§å–‡å­ï¼Œåªèƒ½ç»§ç»­å¬ç€ï¼ˆæ— æ³•æ¥æ”¶å¹¿æ’­çš„å¤„ç†ç»“æœæˆ–è€…é˜»æ–­å¹¿æ’­çš„ä¼ é€’ï¼‰ã€‚<br>  æœ‰åºå¹¿æ’­ å°±ç›¸å½“äºé—´è°æœºå…³çš„ç»å¯†æ¶ˆæ¯ä¼ é€’ã€‚ç»å¯†åˆ°æ‰‹ï¼ˆè§¦å‘å¹¿æ’­ï¼‰é—´è°ç§˜å¯†æ±‡æ€»ç»™ä¸Šçº¿Aï¼ˆå¹¿æ’­æ¥æ”¶å™¨Aï¼‰ã€‚æœ¬æ¥ ä¸Šçº¿ï¼ˆå¹¿æ’­æ¥æ”¶å™¨Aï¼‰åº”è¯¥  å¬å–å®Œæ¯•é‡æ–°æ•´ç†æƒ…å‘é¦–é•¿Bï¼ˆå¹¿æ’­æ¥æ”¶å™¨Bï¼‰æŠ¥å‘Šï¼ˆå‘å¹¿æ’­æ¥æ”¶å™¨Bä¼ æ’­ å¹¿æ’­æ¥æ”¶å™¨Aä¿®æ”¹çš„ç»“æœï¼‰,ä½†æ˜¯Aè¢«æ”¶ä¹°ï¼Œå°†æƒ…æŠ¥éšåŒ¿äº†ï¼Œæ²¡æœ‰å‘é¦–é•¿Bæ±‡æŠ¥ï¼ˆå¹¿æ’­æ¥æ”¶å™¨Aé˜»æ–­è¯¥å¹¿æ’­ï¼Œä½¿å¾—è¯¥å¹¿æ’­ä¸èƒ½è¢«ä¸‹ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨Bæ¥æ”¶åˆ°ï¼‰ã€‚ï¼ˆPSç»“å±€é¦–é•¿Bé”™è¯¯å¸¦äººç‚¸äº†æ‘å§”ä¼šï¼Œè¯¥ç¡è§‰çš„äººç»ˆäºå¯ä»¥å®‰ç”Ÿç¡è§‰äº†ï¼ï¼‰</li>
</ul>
</li>
<li><p>å¹¿æ’­äº‹ä»¶æ³¨å†Œæœ‰ä¸¤ç§</p>
<ol>
<li>é™æ€æ³¨å†Œï¼Œå°±æ˜¯åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­å®šä¹‰ï¼Œæ³¨å†Œçš„å¹¿æ’­æ¥æ”¶å™¨å¿…é¡»è¦ç»§æ‰¿BroadcastReceiver.</li>
<li>åŠ¨æ€æ³¨å†Œï¼Œæ˜¯åœ¨ç¨‹åºä¸­ä½¿ç”¨Context.registerReceiveræ³¨å†Œï¼Œæ³¨å†Œçš„å¹¿æ’­æ¥æ”¶å™¨ç›¸å½“äºä¸€ä¸ªåŒ¿åç±»ã€‚ä¸¤ç§æ–¹å¼éƒ½éœ€è¦IntentFIlterã€‚</li>
</ol>
<ul>
<li>ä¾‹ç¨‹è§ä¸‹èŠ‚ã€‚</li>
</ul>
</li>
</ul>
<h2 id="åŠ¨æ€æ³¨å†Œï¼ˆåœ¨ä»£ç ä¸­æ³¨å†Œï¼‰"><a href="#åŠ¨æ€æ³¨å†Œï¼ˆåœ¨ä»£ç ä¸­æ³¨å†Œï¼‰" class="headerlink" title="åŠ¨æ€æ³¨å†Œï¼ˆåœ¨ä»£ç ä¸­æ³¨å†Œï¼‰"></a>åŠ¨æ€æ³¨å†Œï¼ˆåœ¨ä»£ç ä¸­æ³¨å†Œï¼‰</h2><ul>
<li><p>åœ¨ä»£ç ä¸­é€šè¿‡registerReceiver()æ³¨å†Œã€‚appå…³é—­å,è¯¥æ¥æ”¶å™¨ä¹Ÿä¼šéšä¹‹é”€æ¯ã€‚</p>
</li>
<li><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªå†…éƒ¨å­ç±»NetworkChangeReceiverç»§æ‰¿è‡ª BroadcastReceiver</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkChangeReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</div><div class="line"><span class="meta">@Override</span></div><div class="line"></div><div class="line"><span class="comment">//é‡å†™onReceiveï¼Œæ¥æ”¶åˆ°å¹¿æ’­åæç¤ºæ¶ˆæ¯</span></div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</div><div class="line"> 	Toast.makeText(context, <span class="string">"network is availableç½‘ç»œå·²å˜åŒ–"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨onCreate()æ–¹æ³•ä¸­åˆ›å»ºIntentFilterå®ä¾‹å’ŒNetworkChangeReceiverå®ä¾‹ã€‚å¹¶åœ¨IntentFilterå®ä¾‹ä¸­æ·»åŠ ç½‘ç»œå˜åŒ–æ—¶ç³»ç»Ÿå¹¿æ’­å¯¹åº”å€¼ã€‚éšåä¼ å…¥registerReceiver()ä¸­æ³¨å†Œã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_main);</div><div class="line"> <span class="comment">//åˆ›å»ºIntentFilterå®ä¾‹</span></div><div class="line">    intentFilter = <span class="keyword">new</span> IntentFilter();</div><div class="line">    <span class="comment">//æ·»åŠ å¯¹åº”ç³»ç»Ÿå¹¿æ’­</span></div><div class="line">    intentFilter.addAction(<span class="string">"android.net.conn.CONNECTIVITY_CHANGE"</span>);</div><div class="line">    <span class="comment">//æ·»åŠ NetworkChangeReceiverå®ä¾‹</span></div><div class="line">    networkChangeReceiver = <span class="keyword">new</span> NetworkChangeReceiver();</div><div class="line">    <span class="comment">//åŠ¨æ€æ³¨å†Œ</span></div><div class="line">    registerReceiver(networkChangeReceiver, intentFilter);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åŠ¨æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶å™¨æœ€åè¦å–æ¶ˆæ³¨å†Œã€‚åœ¨onDestroy()æ–¹æ³•ä¸­è°ƒç”¨unregisterReceiver()é”€æ¯åŠ¨æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶å™¨ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">    unregisterReceiver(networkChangeReceiver);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>æœ€åè¦åœ¨AndroidMainfest.xmlä¸­å£°æ˜æŸ¥è¯¢ç³»ç»Ÿç½‘ç»œçŠ¶æ€çš„æƒé™ã€‚</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œæ•ˆæœå¦‚å¦‚æ‰€ç¤ºï¼ˆæ¨¡æ‹Ÿå™¨ï¼‰<br>  <img src="http://ww2.sinaimg.cn/large/6153fc0cjw1f7j04rqb85j20u01hcjv9.jpg" alt=""></p>
</li>
</ul>
<h2 id="é™æ€æ³¨å†Œï¼ˆxmlä¸­æ³¨å†Œï¼‰"><a href="#é™æ€æ³¨å†Œï¼ˆxmlä¸­æ³¨å†Œï¼‰" class="headerlink" title="é™æ€æ³¨å†Œï¼ˆxmlä¸­æ³¨å†Œï¼‰"></a>é™æ€æ³¨å†Œï¼ˆxmlä¸­æ³¨å†Œï¼‰</h2><ul>
<li>ç›´æ¥åœ¨Manifest.xmlæ–‡ä»¶ä¸­é…ç½®å¹¿æ’­æ¥æ”¶è€…</li>
<li>ä¾‹ç¨‹ä¸ºäº†æ–¹ä¾¿åŒæ ·ä»¥<code>android.net.conn.CONNECTIVITY_CHANGE</code>ä¸ºä¾‹ï¼Œä¸åŠ¨æ€æ³¨å†Œç›¸åŒã€‚<h3 id="ä¸ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆç¬¬ä¸€è¡Œä»£ç ï¼‰"><a href="#ä¸ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆç¬¬ä¸€è¡Œä»£ç ï¼‰" class="headerlink" title="ä¸ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆç¬¬ä¸€è¡Œä»£ç ï¼‰"></a>ä¸ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆç¬¬ä¸€è¡Œä»£ç ï¼‰</h3></li>
<li><p>æ–°å»ºåç§°ä¸ºBootCompleteReceiverçš„java class  ä»£ç å¦‚ä¸‹</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">BootCompleteReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span>&#123;</div><div class="line">       Toast.makeText(context, <span class="string">"ç½‘ç»œæ”¹å˜"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">  		 &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨<br>  ä»£ç å¦‚ä¸‹</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".BootCompleteReceiver"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.net.conn.CONNECTIVITY_CHANGE"</span>/&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨AndroidManifest.xmlä¸­å£°æ˜æƒé™</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆåœ¨Activityä¸­å®šä¹‰ï¼‰"><a href="#ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆåœ¨Activityä¸­å®šä¹‰ï¼‰" class="headerlink" title="ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆåœ¨Activityä¸­å®šä¹‰ï¼‰"></a>ä½¿ç”¨å†…éƒ¨å­ç±»ï¼ˆåœ¨Activityä¸­å®šä¹‰ï¼‰</h3><hr>
<p><strong>åœ¨è¿™æ™•åœˆäº†ä¸€ä¸‹åˆï¼Œæ‰¾ä¸å‡ºæ¯›ç—…ã€‚çœ‹ä¹¦å¤šä»”ç»†å§ï¼Œä¹¦ä¸Šè¯´äº†ä¸ç”¨å†…éƒ¨å­ç±»ã€‚</strong><br>è¯¦ç»†èµ„æ–™åœ¨è¿™é‡Œ</p>
<blockquote>
<p><a href="http://blog.csdn.net/chdjj/article/details/19496567" target="_blank" rel="external">http://blog.csdn.net/chdjj/article/details/19496567</a></p>
</blockquote>
<hr>
<ul>
<li><strong>æ¸…å•æ–‡ä»¶æ³¨å†Œå¹¿æ’­æ¥æ”¶è€…æ—¶ï¼Œå¹¿æ’­æ¥æ”¶è€…çš„åå­—æ ¼å¼éœ€è¦æ³¨æ„å› ä¸ºæ˜¯å†…éƒ¨ç±»ï¼Œæ‰€ä»¥éœ€è¦åœ¨å†…éƒ¨ç±»æ‰€åœ¨çš„ç±»ä¸å†…éƒ¨ç±»ä¹‹é—´åŠ ä¸Š$ç¬¦å·</strong>(è¿™ä¸€ç‚¹åœ¨AndroidStudioä¸­è¾“å…¥æ—¶æœ‰æç¤º)</li>
<li><strong>å†…éƒ¨ç±»åœ¨å£°æ˜æ—¶ä¸€å®šè¦å†™æˆé™æ€å†…éƒ¨ç±»ï¼ˆclasså…³é”®å­—å‰åŠ ä¸Šstaticï¼‰ã€‚å¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</strong>ï¼ˆå¹¿æ’­å‘ç”Ÿæ—¶ï¼Œåº”ç”¨åœæ­¢è¿è¡Œï¼‰</li>
</ul>
<hr>
<ul>
<li><p>åœ¨MainActivityä¸­æ–°å»ºå­ç±»</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BootCompleteReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span>&#123;</div><div class="line">        Toast.makeText(context, <span class="string">"Boot complete"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨AndroidManifest.xmlä¸­æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".MainActivity$BootCompleteReceiver"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.net.conn.CONNECTIVITY_CHANGE"</span>/&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨AndroidManifest.xmlä¸­å£°æ˜æƒé™</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œæ•ˆæœåŒåŠ¨æ€æ³¨å†Œ</p>
</li>
</ul>
<h2 id="ä½¿ç”¨å¹¿æ’­æ¥æ”¶å™¨æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨å¹¿æ’­æ¥æ”¶å™¨æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨å¹¿æ’­æ¥æ”¶å™¨æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨å¹¿æ’­æ¥æ”¶å™¨æ³¨æ„äº‹é¡¹</h2><ul>
<li>åœ¨onReceive()æ–¹æ³•ä¸­ä¸å®œæ·»åŠ è¿‡å¤šé€»è¾‘/è€—æ—¶æ“ä½œï¼Œå¹¿æ’­æ¥æ”¶å™¨æ²¡æœ‰å¤šçº¿ç¨‹ï¼Œä¸€æ—¦æ—¶é—´è¿‡é•¿ï¼Œç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</li>
<li>å¹¿æ’­æ¥æ”¶å™¨ä¸€èˆ¬ä¸ºå¯åŠ¨å…¶ä»–ç»„ä»¶ä½œç”¨ã€‚</li>
</ul>
<h2 id="å‘é€æ ‡å‡†å¹¿æ’­"><a href="#å‘é€æ ‡å‡†å¹¿æ’­" class="headerlink" title="å‘é€æ ‡å‡†å¹¿æ’­"></a>å‘é€æ ‡å‡†å¹¿æ’­</h2><hr>
<ul>
<li><p>å‘é€æ ‡å‡†å¹¿æ’­ä¹‹å‰ï¼Œé¦–å…ˆè¦æ³¨å†Œä¸€ä¸ªä½œä¸ºç›®æ ‡çš„å¹¿æ’­æ¥æ”¶å™¨ã€‚ï¼ˆè¿‡ç¨‹ç•¥ï¼Œåªä¸Šä»£ç ï¼‰<br>  æ–°å»ºMyBroadcastReceiver.class</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span></div><div class="line">   &#123;</div><div class="line">    Toast.makeText(context,<span class="string">"MyBroadcastReceiver"</span>,Toast.LENGTH_SHORT).show();</div><div class="line">   	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  åœ¨Xmlä¸­æ³¨å†Œï¼ˆé™æ€ï¼‰</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".MyBroadcastReceiver"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.example.broadcasttest.MyBroad"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li><p>xmlä¸­æ³¨å†Œä¸€ä¸ªButton</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">   <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">   <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">   <span class="attr">android:onClick</span>=<span class="string">"SendBroad"</span></div><div class="line">   <span class="attr">android:text</span>=<span class="string">"SendBroad"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>MainActivityä¸­æ–°å»º SendBroad()å‡½æ•°<br>  é¦–å…ˆæ„å»ºä¸€ä¸ª Intentå¯¹è±¡ï¼Œå°†è‡ªå®šä¹‰çš„å¹¿æ’­å€¼å¡«å…¥ã€‚å†è°ƒç”¨sendBroadcastæ–¹æ³•å°†å¹¿æ’­å‘é€å‡ºå»ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendBroad</span><span class="params">(View view)</span></span></div><div class="line">&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.example.broadcasttest.MyBroad"</span>);</div><div class="line">    sendBroadcast(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å‘é€çš„æ˜¯æ ‡å‡†å¹¿æ’­ã€‚è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾ã€‚<br>  <a href="http://snapgr.am/image/L2ou" target="_blank" rel="external"><img src="http://cdn4.snapgram.co/images/2016/09/10/Screenshot_20160910-220121.png" alt="Screenshot_20160910-220121.png"></a></p>
</li>
</ul>
<h2 id="å‘é€æœ‰åºå¹¿æ’­"><a href="#å‘é€æœ‰åºå¹¿æ’­" class="headerlink" title="å‘é€æœ‰åºå¹¿æ’­"></a>å‘é€æœ‰åºå¹¿æ’­</h2><hr>
<ul>
<li><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªBroad2 çš„å·¥ç¨‹ã€‚åŒæ ·æ¥æ”¶Broadå‘é€çš„å¹¿æ’­ã€‚<br>  ä»£ç å¦‚ä¸‹</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnotherBroadcast</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span></div><div class="line">   &#123;</div><div class="line">       Toast.makeText(context,<span class="string">" AnotherBroadcast"</span>,Toast.LENGTH_SHORT).show();</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".AnotherBroadcast"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">"10"</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.example.broadcasttest.MyBroad"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•æ•ˆæœï¼šå½“æ‘ä¸‹å‘é€å¹¿æ’­æŒ‰é’®åï¼Œå¼¹å‡ºä¸¤ä¸ªæç¤ºã€‚</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä¿®æ”¹Broadé¡¹ç›®ä¸­onClickå¯¹åº”äº‹ä»¶ã€‚å°†sendBroadcast(ï¼‰æ”¹ä¸ºsendOrderedBroadcast();å‘é€æœ‰åºå¹¿æ’­ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendBroad</span><span class="params">(View view)</span></span></div><div class="line">&#123;</div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.example.broadcasttest.MyBroad"</span>);</div><div class="line">    sendOrderedBroadcast(intent,<span class="keyword">null</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>æ•ˆæœä¸å‘é€æ ‡å‡†å¹¿æ’­ç›¸åŒï¼ˆè¿˜æœªå®šä¹‰ä¼˜å…ˆçº§/æˆªæ–­ç­‰ï¼‰</p>
</li>
<li><p>å®šä¹‰ä¼˜å…ˆçº§ï¼Œå†Broadçš„AndroidMainfest.xmlä¸­ä¿®æ”¹æ³¨å†Œçš„å¹¿æ’­æ·»åŠ android:priority=â€100â€ä¼˜å…ˆçº§100</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".MyBroadcastReceiver"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">"100"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.example.broadcasttest.MyBroad"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Broad2çš„AndroidMainfest.xmlä¸­æ·»åŠ android:priority=â€10â€ä¼˜å…ˆçº§10</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".AnotherBroadcast"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">"10"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"com.example.broadcasttest.MyBroad"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>å‘é€å¹¿æ’­åMyBroadcastReceiveræœ€å…ˆæ”¶åˆ°å¹¿æ’­ã€‚</p>
</li>
<li><p>æˆªæ–­å¹¿æ’­ã€‚æœ‰åºå¹¿æ’­ä¸­å‰ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨å¯ä»¥æˆªæ–­å¹¿æ’­ä¼ æ’­ã€‚æ·»åŠ  abortBroadcast();å³å¯ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span></div><div class="line">   &#123;</div><div class="line">       Toast.makeText(context,<span class="string">"MyBroadcastReceiver"</span>,Toast.LENGTH_SHORT).show();</div><div class="line">       abortBroadcast();</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å†æ¬¡ç‚¹å‡»æŒ‰é’®å‘é€å¹¿æ’­ï¼Œåªæœ‰MyBroadcastReceiverå¯ä»¥æ¥æ”¶åˆ°å‘é€çš„å¹¿æ’­ã€‚</p>
</li>
</ul>
<h2 id="æœ¬åœ°å¹¿æ’­"><a href="#æœ¬åœ°å¹¿æ’­" class="headerlink" title="æœ¬åœ°å¹¿æ’­"></a>æœ¬åœ°å¹¿æ’­</h2><ul>
<li><p>åªåœ¨appåº”ç”¨å†…éƒ¨ä¼ é€’çš„å¹¿æ’­ã€‚æ³¨å†Œè¿‡ç¨‹ç±»ä¼¼äºåŠ¨æ€æ³¨å†Œã€‚</p>
</li>
<li><p>å®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»LocalReceiverç»§æ‰¿è‡ªBroadcastReceiver</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span></span>&#123;</div><div class="line">        Toast.makeText(context, <span class="string">"received local broadcast"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>é¦–å…ˆåœ¨onCreate()æ–¹æ³•ä¸­é€šè¿‡localBroadcastManager.getInstanå¾—åˆ°ä¸€ä¸ªLocalBroadcastManagerçš„å®ä¾‹ï¼Œå†åˆ›å»ºIntentFilterå®ä¾‹å’ŒLocalReceiverå®ä¾‹ã€‚å¹¶åœ¨IntentFilterå®ä¾‹ä¸­æ·»åŠ å¹¿æ’­ã€‚éšåä¼ å…¥localBroadcastManager.registerReceiver()ä¸­æ³¨å†Œæœ¬åœ°å¹¿æ’­ã€‚</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">private</span> IntentFilter intentFilter;</div><div class="line"><span class="keyword">private</span> LocalReceiver localReceiver;</div><div class="line"><span class="keyword">private</span> LocalBroadcastManager localBroadcastManager;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_main);</div><div class="line">    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line"></div><div class="line">    localBroadcastManager = localBroadcastManager.getInstance(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">    intentFilter = <span class="keyword">new</span> IntentFilter();</div><div class="line">    intentFilter.addAction(<span class="string">"com.example.broadcasttest.LOCAL_BROADCAST"</span>);</div><div class="line">    localReceiver = <span class="keyword">new</span> LocalReceiver();</div><div class="line">    localBroadcastManager.registerReceiver(localReceiver, intentFilter);       </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Activityçš„onDestroy()ä¸­é”€æ¯æ³¨å†Œã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">    localBroadcastManager.unregisterReceiver(localReceiver);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Buttonå¯¹åº”çš„å‡½æ•°ä¸­è°ƒç”¨localBroadcastManager.sendBroadcastå‘é€æœ¬åœ°å¹¿æ’­ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendBroad</span><span class="params">(View view)</span></span></div><div class="line">&#123;</div><div class="line">      Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.example.broadcasttest.LOCAL_BROADCAST"</span>);</div><div class="line">      localBroadcastManager.sendBroadcast(intent);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>æ•ˆæœåŸºæœ¬åŒä¸Šï¼Œä¸åŠ ç´¯èµ˜ã€‚ä¸è¿‡åœ¨Broad2ä¸­æ˜¯æ€æ ·éƒ½æœä¸åˆ°å¹¿æ’­äº†ã€‚</p>
</li>
<li><p>æœ¬åœ°å¹¿æ’­ç‰¹ç‚¹</p>
<ul>
<li>æ˜ç¡®å¹¿æ’­åªåœ¨åº”ç”¨å†…éƒ¨ï¼Œä¼ é€’æ•°æ®æ— éœ€æ‹…å¿ƒæ³„å¯†ã€‚</li>
<li>å…¶ä»–ç¨‹åºå¹¿æ’­æ— æ³•å‘é€è‡³ç¨‹åºå†…éƒ¨ã€‚</li>
<li>æœ¬åœ°å¹¿æ’­æ¯”å…¨å±€å¹¿æ’­æ›´ä¸ºé«˜æ•ˆã€‚</li>
</ul>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/18/Androidç¬”è®°-Fragments/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/18/Androidç¬”è®°-Fragments/" itemprop="url">
                  Androidç¬”è®°â€”Fragments
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-18T12:00:00+08:00">
                2016-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/18/Androidç¬”è®°-Fragments/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/18/Androidç¬”è®°-Fragments/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/12/18/Androidç¬”è®°-Fragments/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”Fragments">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,925
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  8m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
<li><a href="http://blog.csdn.net/vanpersie_9987/article/details/51311808" target="_blank" rel="external"> Androidå®˜æ–¹æ–‡æ¡£ä¹‹App Componentsï¼ˆFragmentsï¼‰</a></li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3</li>
</ul>
<p>å¯¼è¯­</p>
<ul>
<li>Fragmentsçš„è‰ºæœ¯ä¹‹æ—…</li>
</ul>
<hr>
<h2 id="Fragmentsç®€ä»‹"><a href="#Fragmentsç®€ä»‹" class="headerlink" title="Fragmentsç®€ä»‹"></a>Fragmentsç®€ä»‹</h2><ul>
<li>Fragmentâ€”ç‰‡æ®µ æ˜¯Android åœ¨ Android 3.0ï¼ˆAPI 11 çº§ï¼‰ä¸­å¼•å…¥äº†ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç»™å¤§å±å¹•ï¼ˆå¦‚å¹³æ¿ç”µè„‘ï¼‰ä¸Šæ›´åŠ åŠ¨æ€å’Œçµæ´»çš„ UI è®¾è®¡æä¾›æ”¯æŒã€‚</li>
<li>å¯ä»¥å°†å¤šä¸ªç‰‡æ®µç»„åˆåœ¨ä¸€ä¸ª Activity ä¸­æ¥æ„å»ºå¤šçª—æ ¼ UIï¼Œä»¥åŠåœ¨å¤šä¸ª Activity ä¸­é‡å¤ä½¿ç”¨æŸä¸ªç‰‡æ®µã€‚å¯ä»¥å°†ç‰‡æ®µè§†ä¸º Activity çš„æ¨¡å—åŒ–ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…·æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œèƒ½æ¥æ”¶è‡ªå·±çš„è¾“å…¥äº‹ä»¶ï¼Œå¯ä»¥åœ¨ Activity è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤ç‰‡æ®µï¼ˆç±»ä¼¼äºä¸åŒ Activity ä¸­é‡å¤ä½¿ç”¨çš„â€œå­ Activityâ€ï¼‰</li>
<li><a href="https://developer.android.com/guide/components/fragments.html" target="_blank" rel="external">Googleå®˜æ–¹æ–‡æ¡£(ä¸­æ–‡)</a></li>
</ul>
<h2 id="åˆ›å»ºFragments"><a href="#åˆ›å»ºFragments" class="headerlink" title="åˆ›å»ºFragments"></a>åˆ›å»ºFragments</h2><ul>
<li>fragmentåˆ›å»ºè¿‡ç¨‹ä¸Activityç±»ä¼¼ã€‚</li>
</ul>
<ul>
<li>åˆ›å»ºFragmentï¼Œéœ€è¦ç»§æ‰¿ä¸€ä¸ªFragmentç±»ï¼Œå¹¶å®ç°Fragmentçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œå¦‚onCreate(), onStart(), onPause(), onStop()ç­‰</li>
</ul>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨Fragmentä¸­åº”è‡³å°‘é‡å†™ä»¥ä¸‹è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•<br><strong>å¿…é¡»é‡å†™çš„æ—¶onCreateView()æ–¹æ³•.</strong><ul>
<li>onCreate()ï¼šåˆ›å»ºFragmentå®ä¾‹æ—¶ï¼Œç³»ç»Ÿå›è°ƒçš„æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå¯¹ä¸€äº›å¿…è¦çš„ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–</li>
<li>onCreateView()ï¼šFragmentä¸Šç»˜åˆ¶UIæ—¶ï¼Œå›æ‰è¯¥æ–¹æ³•ã€‚è¿”å›ä¸€ä¸ªViewå¯¹è±¡ï¼Œè¡¨ç¤ºFragmentçš„æ ¹è§†å›¾ï¼›è‹¥Fragmentä¸éœ€è¦ç»‘å®šç¤ºå›¾ï¼Œå¯ä»¥è¿”å›null</li>
<li>onPause()ï¼šå½“ç”¨æˆ·ç¦»å¼€Fragmentæ—¶å›è°ƒã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå¯¹Fragmentçš„æ•°æ®ä¿¡æ¯åšæŒä¹…åŒ–çš„ä¿å­˜å·¥ä½œ</li>
</ul>
</li>
</ul>
<h3 id="åˆ›å»ºä¸€ä¸ªFragmentç±»"><a href="#åˆ›å»ºä¸€ä¸ªFragmentç±»" class="headerlink" title="åˆ›å»ºä¸€ä¸ªFragmentç±»"></a>åˆ›å»ºä¸€ä¸ªFragmentç±»</h3><ul>
<li>æ–°å»ºfirst_fragme ç»§æ‰¿è‡ªFragment</li>
<li><p>Android Studioä¸­ å¯¹åº”Fragment åŒ…æœ‰ä¸¤ä¸ªï¼Œé€‰æ‹©support-v4 _(è¿™ä¸ªç‰ˆæœ¬å¯ä»¥å†Androidç‰ˆæœ¬ä¸­ä¿æŒFragmentç‰¹æ€§ä¸€è‡´)</p>
</li>
<li><p>Fragmentå¹¶éä¸€å®šè¦ç»‘å®šä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ï¼Œä¸‹é¢ä¼šæåˆ°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span> <span class="params">(LayoutInflater inflater, ViewGroup container, Bundle saveInstanceState)</span></span>&#123;</div><div class="line">       View view = inflater.inflate(R.layout.fragment_firest,container,<span class="keyword">false</span>);</div><div class="line">       <span class="keyword">return</span> view;</div><div class="line">   	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ä¸æ­¤å¯¹åº”çš„fragment<em>firestå¸ƒå±€æ–‡ä»¶ </em><br>LinearLayoutåŠ ä¸€ä¸ªButtonï¼ŒèƒŒæ™¯é¢œè‰²è®¾ç½®ä¸ºäº†é›è“è‰²ã€‚</li>
</ul>
</li>
<li><p>onCreateView()æ–¹æ³•</p>
<ul>
<li>ViewGroupæ¥è‡ªå®¿ä¸»Activityå®¹å™¨å¸ƒå±€ï¼ŒFragmentçš„å¸ƒå±€å°†å…¶ä½œä¸ºæ ¹è§†å›¾æ’å…¥è‡³è¯¥è§†å›¾ä¸­ã€‚</li>
<li>Bundleç”¨äºå›ä¼ ä¹‹å‰å æ®è¯¥ä½ç½®çš„Fragmentå®ä¾‹æ‰€ä¿å­˜çš„Bundleä¿¡æ¯ï¼Œå½“è¯¥Fragmentçš„æ–°å®ä¾‹å¤„äºresumeçŠ¶æ€æ—¶ï¼Œè¯¥å‚æ•°è¢«å›ä¼ </li>
</ul>
</li>
<li><p>inflate() æ–¹æ³•</p>
<ul>
<li><p>å‚æ•°1ï¼ˆintï¼‰ï¼šéœ€è¦ç»‘å®šçš„Layoutçš„èµ„æºIDï¼›</p>
</li>
<li><p>å‚æ•°2ï¼ˆViewGroupï¼‰ï¼šç»‘å®šçš„Layoutå¸ƒå±€çš„çˆ¶è§†å›¾ï¼›</p>
</li>
<li><p>å‚æ•°3ï¼ˆbooleanï¼‰ï¼šæ˜¯å¦éœ€è¦å°†å‚æ•°1çš„Layoutèµ„æºä¾é™„äºï¼Œå‚æ•°2çš„ViewGroupä¸Šï¼Œfalseï¼Œè¡¨ç¤ºä¸ä¾é™„ã€‚ï¼ˆç³»ç»Ÿå·²ç»é»˜è®¤å°†Layoutæ’å…¥è‡³ViewGroupä¸­ï¼Œè‹¥ä¸ºtrueï¼Œå°†æ·»åŠ ä¸€å±‚å†—ä½™çš„è§†å›¾</p>
</li>
</ul>
</li>
</ul>
<h3 id="åœ¨XMLå°†fragmentæ·»åŠ åˆ°activity"><a href="#åœ¨XMLå°†fragmentæ·»åŠ åˆ°activity" class="headerlink" title="åœ¨XMLå°†fragmentæ·»åŠ åˆ°activity"></a>åœ¨XMLå°†fragmentæ·»åŠ åˆ°activity</h3><ul>
<li><p>åœ¨activity_main.xmlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚è·Ÿæ·»åŠ ä¸€ä¸ªlayoutæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">fragment</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/left_fragment"</span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"ljy.com.fragmenttest.fragment_firest"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>/&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è‡³æ­¤ä¸€ä¸ªfragmentæ·»åŠ å®Œæ¯•ã€‚ä¸ºäº†å¯¹æ¯”ï¼Œå†æ–°å»ºä¸€ä¸ªsecond_fragmentï¼ŒèƒŒæ™¯é¢œè‰²ä¸åŒï¼Œä¸¤è€…åŒæ—¶æ·»åŠ è¿›activity_mainä¸­ã€‚</p>
</li>
<li><p><img src="http://cdn5.snapgram.co/images/2016/10/10/Screenshot_1476109113.png" alt="Screenshot_1476109113.png"></p>
</li>
<li><p>ä¸€èˆ¬æ¥è¯´å¿…é¡»ä¸ºfragmentè®¾å®šå”¯ä¸€çš„èº«ä»½æ ‡è¯†ï¼Œä»¥ä¾¿å½“å®¿ä¸»Activityä¸ºrestartçŠ¶æ€æ—¶å¯ä»¥æ¢å¤fragment</p>
<ul>
<li>android:idå±æ€§ä¸ºfragmentæŒ‡å®šå”¯ä¸€ID</li>
<li>android:tagå±æ€§ä¸ºfragmentæŒ‡å®šå”¯ä¸€å­—ç¬¦ä¸²æ ‡è¯†</li>
<li>æœªæŒ‡å®šï¼Œåˆ™è¯¥fragmentçš„æ ‡è¯†ä¸ºå…¶çˆ¶å®¹å™¨æ§ä»¶çš„ID</li>
</ul>
</li>
</ul>
<h3 id="åŠ¨æ€æ·»åŠ ç¢ç‰‡"><a href="#åŠ¨æ€æ·»åŠ ç¢ç‰‡" class="headerlink" title="åŠ¨æ€æ·»åŠ ç¢ç‰‡"></a>åŠ¨æ€æ·»åŠ ç¢ç‰‡</h3><hr>
<ul>
<li><strong>å¤„ç†ç‰‡æ®µæ—¶ï¼Œè¯·è°¨è®°ï¼šActivity å¸ƒå±€å¿…é¡»åŒ…å«ä¸€ä¸ªå¯ä»¥æ’å…¥ç‰‡æ®µçš„å®¹å™¨ View</strong></li>
</ul>
<hr>
<ul>
<li><p>æ·»åŠ æˆ–ç§»é™¤ç‰‡æ®µå¿…é¡»ä½¿ç”¨ FragmentManager åˆ›å»º FragmentTransactionï¼Œ FragmentTransactionå°†æä¾›æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ç‰‡æ®µä»¥åŠæ‰§è¡Œå…¶ä»–ç‰‡æ®µäº‹åŠ¡æ‰€éœ€çš„ APIã€‚Activity å†…è°ƒç”¨ getSupportFragmentManager() ä»¥è·å– FragmentManager</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rightfragment right = <span class="keyword">new</span> rightfragment();</div><div class="line">FragmentManager fragmentManager = getSupportFragmentManager();</div></pre></td></tr></table></figure>
</li>
<li><p>è°ƒç”¨ beginTransaction() åˆ›å»ºä¸€ä¸ª FragmentTransactionäº‹åŠ¡ï¼Œå¹¶è°ƒç”¨ add() æ·»åŠ ä¸€ä¸ªç‰‡æ®µï¼Œåšå¥½æ›´æ”¹å‡†å¤‡æ—¶ï¼Œè°ƒç”¨ commit()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FragmentTransaction transaction = fragmentManager.beginTransaction();</div><div class="line">transaction.replace(R.id.right_layout,right);</div><div class="line">transaction.commit();</div></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><p>é¦–å…ˆæ”¹é€ ä¸€ä¸‹activity<em>main.xml</em><br>FrameLayoutåŒ…å«ä¸€ä¸ªleft_fragment</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="tag">&lt;<span class="name">FrameLayout</span>  </span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/right_layout"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">fragment</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/left_fragment"</span></div><div class="line">        <span class="attr">android:name</span>=<span class="string">"com.example.fragment_text.leftfragment"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨MainActivityçš„onCreateæ–¹æ³•ä¸­æ·»åŠ fragment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ–°å»ºå‡†å¤‡æ›¿æ¢çš„Fragmentå®ä¾‹</span></div><div class="line">rightfragment right = <span class="keyword">new</span> rightfragment();</div><div class="line"></div><div class="line"><span class="comment">//æ–°å»ºFragmentManager</span></div><div class="line">FragmentManager fragmentManager = getSupportFragmentManager();</div><div class="line"><span class="comment">// è°ƒç”¨beginTransaction() åˆ›å»ºFragmentTransaction</span></div><div class="line">FragmentTransaction transaction = fragmentManager.beginTransaction();</div><div class="line"></div><div class="line"><span class="comment">//FragmentTransactionå†…å¤„ç†æ·»åŠ /æ›¿æ¢ç­‰ã€‚</span></div><div class="line">transaction.replace(R.id.right_layout,right);</div><div class="line"></div><div class="line"><span class="comment">//æœ€åæ‰§è¡Œcommit()æ–¹æ³•</span></div><div class="line">transaction.commit();</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="ç®¡ç†Fragments-æ‰§è¡ŒFragmentäº‹åŠ¡"><a href="#ç®¡ç†Fragments-æ‰§è¡ŒFragmentäº‹åŠ¡" class="headerlink" title="ç®¡ç†Fragments/æ‰§è¡ŒFragmentäº‹åŠ¡"></a>ç®¡ç†Fragments/æ‰§è¡ŒFragmentäº‹åŠ¡</h2><ul>
<li><p>Activityä¸­ç®¡ç†Fragmentï¼Œä½¿ç”¨FragmentManager(</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FragmentManager fragmentManager = getFragmentManager();</div></pre></td></tr></table></figure>
<p>å¯ä»¥å®ç°çš„æ“ä½œ</p>
<ul>
<li>findFragmentById()æ–¹æ³•è·å–ç”±Activityç®¡è¾–çš„ç»‘å®šäº†UIçš„Fragmentå®ä¾‹</li>
<li>popBackStack()æ–¹æ³•å°†Fragmentä»åé€€æ ˆä¸­å¼¹å‡º</li>
<li>addOnBackStackChangedListener()æ–¹æ³•æ³¨å†Œç›‘å¬å™¨ï¼Œç”¨äºç›‘å¬åé€€æ ˆçš„å˜åŒ–</li>
</ul>
</li>
<li><p>Fragmentå¯å®ç°åŠ¨æ€æ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢ ç­‰ æ“ä½œï¼Œæ¯ä¸€ç»„å‘Activityæäº¤çš„å˜åŒ–ç§°ä¸ºäº‹åŠ¡ï¼Œä½¿ç”¨FragmentTransactionè¿™æ“ä½œäº‹åŠ¡,è°ƒç”¨beginTransaction(ï¼‰å¼€å¯ä¸€ä¸ªäº‹åŠ¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">FragmentManager fragmentManager = getFragmentManager();</div><div class="line">FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();</div></pre></td></tr></table></figure>
<p>å¯å®ç°å¯¹Feagmentçš„æ“ä½œ</p>
<ul>
<li>add()  //æ·»åŠ </li>
<li>remove()   //ç§»é™¤</li>
<li>replace()   //æ›¿æ¢</li>
</ul>
</li>
<li><p>äº‹åŠ¡è¦åœ¨Activityä¸­ç”Ÿæ•ˆï¼Œè°ƒç”¨commit()æ–¹æ³•æäº¤</p>
</li>
<li><p>commit()æ–¹æ³•ä¹‹å‰ï¼Œè°ƒç”¨addToBackStack()æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥äº‹ç‰©æ·»åŠ åˆ°ç”±Activityç®¡è¾–çš„Fragmentè¿”å›æ ˆä¸­ã€‚ç‚¹å‡»Backé”®å³æ’¤é”€è¯¥äº‹ç‰©æäº¤çš„æ›´æ”¹</p>
</li>
</ul>
<hr>
<ul>
<li><p>ä½¿ç”¨FragmentTransactionæ“ä½œäº‹åŠ¡æ—¶æ³¨æ„</p>
<ul>
<li>commit()å¿…é¡»åœ¨æœ€åè°ƒç”¨</li>
<li>ä¸€ä¸ªå¸ƒå±€å®¹å™¨ä¸­æ·»åŠ å¤šä¸ªFragmentï¼ŒåŠ å…¥çš„é¡ºåºå†³å®šäº†è¿™äº›Fragmentç»‘å®šçš„UIè§†å›¾åœ¨Viewæ ‘ä¸­çš„å±‚çº§é¡ºåº</li>
</ul>
</li>
<li><p>commit()æ–¹æ³•æäº¤åï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œäº‹åŠ¡ï¼ŒUIæ›´æ–°åªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œï¼Œä¸»çº¿ç¨‹ç©ºé—²æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œäº‹åŠ¡æ“ä½œ<br>Androidä¹Ÿæä¾›äº† åœ¨UIçº¿ç¨‹ä¸­è°ƒç”¨executePendingTransactions()æ–¹æ³•ï¼Œä½¿commit()æ–¹æ³•è°ƒç”¨åç«‹å³æ‰§è¡Œæäº¤çš„äº‹åŠ¡ï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰</p>
</li>
</ul>
<hr>
<h2 id="ä¸-Activity-é€šä¿¡"><a href="#ä¸-Activity-é€šä¿¡" class="headerlink" title="ä¸ Activity é€šä¿¡"></a>ä¸ Activity é€šä¿¡</h2><ul>
<li><p>Fragment ä¸­è·å– Activity å®ä¾‹<br> getActivity()æ–¹æ³•å¯ä»¥è·å–åˆ° Activity å®ä¾‹</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MainActivity activity = (MainActivity) getActivity();</div></pre></td></tr></table></figure>
<p> è°ƒç”¨Activityä¸­çš„è¯•å›¾ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨findViewById()å³å¯ï¼ŒgetActivity()æ–¹æ³•è¿”å›çš„æ—¢æ˜¯ä¸€ä¸ªContextå¯¹è±¡</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">View listView = getActivity().findViewById(R.id.list);</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li>åœ¨Fragmentä¸­ä½¿ç”¨Contextå¯¹è±¡ï¼ŒgetActivity()æ–¹æ³•ï¼Œåªèƒ½æ˜¯åœ¨fragmentå·²ç»ä¾é™„äºActivityåæ‰èƒ½è°ƒç”¨ã€‚å½“fragmentæœªä¾é™„äºæŸä¸ªActivityã€æˆ–fragmentå·²ç»å¤„äºå…¶ç”Ÿå‘½å‘¨æœŸçš„æœ«å°¾è€Œä¸å†ä¾é™„äºæŸä¸ªActivityæ—¶ï¼Œè°ƒç”¨getActivity()æ–¹æ³•ä¼šç›´æ¥è¿”å›null</li>
</ul>
<hr>
<ul>
<li><p>Activity ä¸­è·å– Fragment å®ä¾‹()<br>FragmentMangeræä¾›äº†findFragmentById()æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RightFragment fragment = (RightFragment) getFragmentManager().findFragmentById(R.id.example_fragment);</div></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨çš„ä½¿support-V4åŒ…ï¼Œåˆ™ getFragmentManager()æ”¹ä¸ºgetSupportFragmentManager()ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RightFragment fragment = (RightFragment)getSupportFragmentManager().findFragmentById(R.id.example_fragment);</div></pre></td></tr></table></figure>
</li>
<li><p>Fragmentä¸Frangmentä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡å®¿ä¸»Activityï¼Œè·å–åˆ°å¦ä¸€ä¸ªFragmentå®ä¾‹ï¼Œè°ƒç”¨å¦ä¸€ä¸ªFragmentä¸­çš„æ–¹æ³•</p>
</li>
</ul>
<h3 id="ä¸ºActivityåˆ›å»ºäº‹ä»¶å›è°ƒ"><a href="#ä¸ºActivityåˆ›å»ºäº‹ä»¶å›è°ƒ" class="headerlink" title="ä¸ºActivityåˆ›å»ºäº‹ä»¶å›è°ƒ"></a>ä¸ºActivityåˆ›å»ºäº‹ä»¶å›è°ƒ</h3><ul>
<li>å å‘ï¼Œ</li>
</ul>
<h2 id="Frangmentçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Frangmentçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Frangmentçš„ç”Ÿå‘½å‘¨æœŸ"></a>Frangmentçš„ç”Ÿå‘½å‘¨æœŸ</h2><ul>
<li><p>ä¸Activityæä¸ºç›¸ä¼¼ï¼Œä¸” Frangmentçš„ç”Ÿå‘½å‘¨æœŸä¸å®¿ä¸»Activityæœ‰å¾ˆå¤§å…³è”</p>
</li>
<li><p>æœ‰3ç§çŠ¶æ€</p>
<ul>
<li>Resumedç»§ç»­ï¼šå®¿ä¸»Activityå¤„äºrunningï¼ŒFragmentå¤„äºå¯è§çŠ¶æ€</li>
<li>Pausedæš‚åœï¼šå¦ä¸€ä¸ªActivityå¤„äºå‰å°å¹¶è·å¾—äº†ç„¦ç‚¹ï¼Œè¯¥Fragmentçš„å®¿ä¸»Activityå¹¶æœªè¢«å…¨éƒ¨é®æŒ¡</li>
<li>Stoppedåœæ­¢ï¼šFragmentä¸å¯è§æˆ–Fragmentå·²è¢«Activityç§»é™¤ï¼Œå®¿ä¸»Activityè¢«å›æ”¶æ—¶ï¼ŒFragmentä¹Ÿå°†è¢«å›æ”¶</li>
</ul>
</li>
</ul>
<ul>
<li><img src="http://cdn3.snapgram.co/imgs/2016/12/22/fragment_lifecycle.png" alt="fragment_lifecycle.png"></li>
</ul>
<h3 id="å®¿ä¸»Activityçš„å½±å“"><a href="#å®¿ä¸»Activityçš„å½±å“" class="headerlink" title="å®¿ä¸»Activityçš„å½±å“"></a>å®¿ä¸»Activityçš„å½±å“</h3><ul>
<li><a href="http://snapgr.am/image/L5KP" target="_blank" rel="external"><img src="http://cdn1.snapgram.co/imgs/2016/12/22/activity_fragment_lifecycle.png" alt="activity_fragment_lifecycle.png"></a></li>
</ul>
<hr>
<h4 id="é‡è¦å›è°ƒæ–¹æ³•"><a href="#é‡è¦å›è°ƒæ–¹æ³•" class="headerlink" title="é‡è¦å›è°ƒæ–¹æ³•"></a>é‡è¦å›è°ƒæ–¹æ³•</h4><ul>
<li>onAttach()ï¼šfragmentå…³è”Activityæ—¶å›è°ƒ</li>
<li>onCreateView()ï¼šfragmentç»‘å®šUIè§†å›¾(åŠ è½½å¸ƒå±€)æ—¶å›è°ƒ</li>
<li>onActivityCreated()ï¼šå®¿ä¸»Activityåˆ›å»ºå®Œæ¯•  (å®¿ä¸»Activityçš„onCreate()æ–¹æ³•è¿”å›)  åè°ƒç”¨</li>
<li>onDestroyView()ï¼šä¸fragmentç»‘å®šçš„UIè§†å›¾è¢«ç§»é™¤æ—¶å›è°ƒ</li>
<li>onDetach()ï¼šfragmentä¸å†ä¾é™„äºActivityæ—¶å›è°ƒ</li>
</ul>
<hr>
<ul>
<li><p>Activity ä¸Fragmentåœ¨ç”Ÿå‘½å‘¨æœŸä¹‹é—´çš„æœ€æ˜¾è‘—å·®å¼‚åœ¨äºå®ƒä»¬åœ¨å…¶å„è‡ªè¿”å›æ ˆä¸­çš„å­˜å‚¨æ–¹å¼ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒActivity åœæ­¢æ—¶ä¼šè¢«æ”¾å…¥ç”±ç³»ç»Ÿç®¡ç†çš„ Activity è¿”å›æ ˆï¼ˆä»¥ä¾¿ç”¨æˆ·é€šè¿‡è¿”å›æŒ‰é’®å›é€€åˆ° Activityï¼‰ï¼Œ<br>Framentä»…å½“æ‚¨åœ¨ç§»é™¤ç‰‡æ®µçš„äº‹åŠ¡æ‰§è¡ŒæœŸé—´é€šè¿‡è°ƒç”¨ addToBackStack() è¯·æ±‚ä¿å­˜å®ä¾‹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šå°†Fragmentæ”¾å…¥ç”±å®¿ä¸» Activity ç®¡ç†çš„è¿”å›æ ˆã€‚</p>
</li>
<li><p>ä¸€æ—¦Activityå¤„äºresumeçŠ¶æ€æ—¶ï¼Œå¯ä»¥è‡ªç”±åœ°æ·»åŠ æˆ–ç§»é™¤fragmentï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“Activityçš„çŠ¶æ€ä¸ºresumeæ—¶ï¼Œfragmentæ‰èƒ½å¤Ÿè‡ªç”±åœ°æ§åˆ¶è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ</p>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  
  
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/16/Androidç¬”è®°-UI-RecyclerView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jasper">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/v.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»˜">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/16/Androidç¬”è®°-UI-RecyclerView/" itemprop="url">
                  Androidç¬”è®°â€”UI-RecyclerView
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-16T12:00:00+08:00">
                2016-12-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Androidç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">Androidç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/16/Androidç¬”è®°-UI-RecyclerView/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/12/16/Androidç¬”è®°-UI-RecyclerView/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/12/16/Androidç¬”è®°-UI-RecyclerView/" class="leancloud_visitors" data-flag-title="Androidç¬”è®°â€”UI-RecyclerView">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  1,659
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  8m
                </span>
              
            </div>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>èµ„æ–™æ¥æºå¦‚ä¸‹</p>
<ul>
<li>ç¬¬ä¸€è¡Œä»£ç (ç¬¬äºŒç‰ˆ)</li>
<li><a href="http://blog.cgsdream.org/2015/06/11/recyclerview/" target="_blank" rel="external">RecyclerViewä½¿ç”¨è¯¦è§£â€”å…­å’Œæ•¬</a></li>
<li><a href="http://jinyudong.com/2014/11/13/Introduce-RecyclerView-%E4%B8%80/" target="_blank" rel="external">RecyclerViewä½¿ç”¨ä»‹ç»â€” Jin Yudong</a></li>
<li><a href="http://blog.csdn.net/lmj623565791/article/details/45059587" target="_blank" rel="external">Android RecyclerView ä½¿ç”¨å®Œå…¨è§£æ ä½“éªŒè‰ºæœ¯èˆ¬çš„æ§ä»¶â€”é¸¿æ´‹_</a></li>
<li><a href="https://developer.android.com/training/material/lists-cards.html#RecyclerView" target="_blank" rel="external">åˆ›å»ºåˆ—è¡¨ä¸å¡ç‰‡â€”Android Developer</a></li>
</ul>
<p>ç¼–ç¨‹ç¯å¢ƒ</p>
<ul>
<li>Android Studio 2.2.3 </li>
</ul>
<p>å¯¼è¯­</p>
<ul>
<li>RecyclerViewå†…å®¹è¾ƒListViewæ›´å¤šï¼ŒåˆæœŸåªèƒ½æ›´æ–°ä¸€äº›åŸºç¡€å†…å®¹ï¼Œé«˜çº§çš„ç”¨æ³•éšæ—¶æ›´æ–°ï¼Œé•¿æœŸè·Ÿè¿›</li>
</ul>
<hr>
<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><ul>
<li><a href="https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html" target="_blank" rel="external">RecyclerView</a>æ˜¯ç”¨äºå–ä»£ListViewçš„ç»„ä»¶,ç¬¬ä¸€æ¬¡å‡ºç°æ˜¯åœ¨2014å¹´google I/Oå¤§ä¼šï¼Œå†…ç½®åœ¨æ˜¯Android LåŠä»¥ä¸Šç‰ˆæœ¬çš„SDKä¸­ã€‚</li>
<li>å¯¹æ¯”ä¸ListViewï¼ŒRecyclerViewå¼¥è¡¥äº†ListViewä¸­çš„æ•ˆç‡é—®é¢˜ï¼ŒåŒæ—¶æ”¯æŒæ›´å¤šçš„æ˜¾ç¤ºæ•ˆæœï¼Œä»£ç é€»è¾‘æ›´ä¸ºæ¸…æ™°</li>
</ul>
<h3 id="åŸºæœ¬ä½¿ç”¨æ­¥éª¤"><a href="#åŸºæœ¬ä½¿ç”¨æ­¥éª¤" class="headerlink" title="åŸºæœ¬ä½¿ç”¨æ­¥éª¤"></a>åŸºæœ¬ä½¿ç”¨æ­¥éª¤</h3><hr>
<ul>
<li>RecyclerViewå®šä¹‰åœ¨supportåº“ä¸­ï¼Œä½¿ç”¨RecyclerViewä¹‹å‰å¿…é¡»åœ¨æ·»åŠ ä¾èµ–</li>
<li>build.gradleä¸­æ·»åŠ <br> <code>compile &#39;com.android.support:recyclerview-v7:25.1.0&#39;</code></li>
</ul>
<hr>
<ul>
<li><p>RecyclerViewé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š<br><img src="http://cdn1.snapgram.co/imgs/2016/12/16/RecyclerView.png" alt="RecyclerView.png"></p>
</li>
<li><p>è¦ä½¿ç”¨RecyclerViewï¼Œéœ€è¦æŒ‡å®š<strong>ä¸€ä¸ªAdapteré€‚é…å™¨</strong>å’Œä¸€ä¸ª<strong>LayoutManagerå¸ƒå±€ç®¡ç†å™¨</strong></p>
</li>
<li><p><strong>Adapteré€‚é…å™¨</strong>ï¼šä½œç”¨ä¸ListViewä¸­ä½¿ç”¨çš„Adapterç›¸åŒï¼Œéƒ½æ˜¯å°†æ•°æ®ä¸å¯¹åº”itemçš„ç•Œé¢è¿›è¡Œç»‘å®š<br>æ‰€ä¸åŒçš„æ˜¯ï¼šRecyclerViewä¸­é€‚é…å™¨å¿…é¡»ç»§æ‰¿è‡ªRecyclerView.Adapterï¼Œä¸” å¼ºåˆ¶ä½¿ç”¨äº†ViewHolder</p>
</li>
</ul>
<ul>
<li><p><strong>LayoutManagerå¸ƒå±€ç®¡ç†å™¨</strong>ï¼šæ¯ä¸€ä¸ªitemå¦‚ä½•è¿›è¡Œæ’åˆ—ï¼Œä½•æ—¶å±•ç¤ºå’Œéšè—ã€‚<br>é‡ç”¨Viewæ—¶ï¼ŒLayoutManagerä¼šå‘Adapteré€‚é…å™¨è¯·æ±‚æ–°çš„æ•°æ®æ›¿æ¢æ—§çš„æ•°æ®ï¼Œé¿å…äº†Viewçš„å†—ä½™å’Œé¢‘ç¹è°ƒç”¨findViewById</p>
<p>LayoutManagerçš„å¼•å…¥ ä½¿å¾—å„ç§å¸ƒå±€æ’åˆ—ç¼–å†™ï¼Œå˜çš„æ ¼å¤–å®¹æ˜“ï¼Œè¿™ä¹Ÿæ˜¯RecyclerViewä¼˜äºListViewçš„ä¸€ä¸ªåœ°æ–¹</p>
</li>
<li><p>ç›®å‰RecyclerView å†…ç½®3ç§LayoutManagerï¼š</p>
<ul>
<li>LinearLayoutManager æ¨ªå‘/ç«–å‘å¸ƒå±€</li>
<li>GridLayoutManager  ç½‘æ ¼å¸ƒå±€</li>
<li>StaggeredGridLayoutManager  ç€‘å¸ƒæµå¸ƒå±€</li>
</ul>
</li>
</ul>
<ul>
<li><p>MainActivityä¸­ RecyclerView è®¾ç½®  </p>
<ol>
<li><p>åˆ›å»ºRecyclerViewå¯¹è±¡<br><code>RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycle_view);</code></p>
</li>
<li><p>è®¾ç½®LayoutManageræ˜¾ç¤ºè§„åˆ™</p>
</li>
<li><p>è®¾ç½®é€‚é…å™¨<br><code>recyclerview.setAdapter(adapter);</code></p>
</li>
</ol>
</li>
</ul>
<h4 id="ç®€å•å®ä¾‹"><a href="#ç®€å•å®ä¾‹" class="headerlink" title="ç®€å•å®ä¾‹"></a>ç®€å•å®ä¾‹</h4><p>ç”±ä¸€ä¸ªç®€å•çš„å®ä¾‹+è¯¦ç»†åˆ†æ</p>
<ul>
<li><p>æ·»åŠ ä¾èµ–<br>æ‰“å¼€app/build.gradleæ–‡ä»¶ï¼Œåœ¨dependenciesé—­åŒ…ä¸‹æ·»åŠ ä¾èµ–åº“<br>ç‰ˆæœ¬ä¸ä½ å·¥ç¨‹çš„<code>com.android.support:appcompat-v7:25.1.0</code>ç‰ˆæœ¬å¯¹åº”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile <span class="string">'com.android.support:recyclerview-v7:25.1.0'</span></div></pre></td></tr></table></figure>
<p>ä¹‹åAndroidStudioä¼šå¼€å§‹åŒæ­¥</p>
</li>
<li><p>æ·»åŠ RecyclerViewåˆ°xmlæ–‡ä»¶,åŸºæœ¬ä¸ListViewä¸€è‡´ï¼Œä¸è¿‡RecyclerViewå¹¶éå†…ç½®åœ¨SDKä¸­ï¼Œè¿™é‡Œéœ€è¦å†™å‡ºå®Œæ•´çš„åŒ…è·¯å¾„</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></div><div class="line">      <span class="attr">android:id</span>=<span class="string">"@+id/recycle_view"</span></div><div class="line">      <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">      <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">      /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è¦å±•ç¤ºçš„ä¾æ—§æ˜¯æ°´æœ+å›¾ç‰‡å½¢å¼ï¼Œ<br>å›¾ç‰‡èµ„æºåœ¨ç¬¬ä¸€è¡Œä»£ç ç¬¬äºŒç‰ˆæºç  /chapter3/ListViewTest\app\src\main\res\drawable-hdpiä¸‹ï¼ŒåŒæ—¶å°†Fruitç±»å’Œfruit<em>item.xmlä¸€å¹¶å¤åˆ¶ï¼Œè¿™é‡Œç»™å‡ºä¸¤è€…æºç ï¼Œä¸å†åŠ åˆ†æ</em></p>
<ul>
<li><p>Fruitç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> </span>&#123;</div><div class="line"><span class="keyword">private</span> String name;</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> imageId;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Fruit</span><span class="params">(String name, <span class="keyword">int</span> imageId)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.imageId = imageId;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getImageId</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> imageId;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>fruit<em>item.xml  </em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></div><div class="line"><span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line"><span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/fruit_image"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/fruit_name"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_gravity</span>=<span class="string">"center_vertical"</span></div><div class="line">    <span class="attr">android:layout_marginLeft</span>=<span class="string">"10dp"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>å‡†å¤‡RecyclerViewé€‚é…å™¨ï¼Œé€‚é…å™¨éœ€è¦ç»§æ‰¿è‡ª  RecyclerView.Adapterï¼Œå°†æ³›å‹æŒ‡å®šä¸º   .ViewHolderï¼Œ(ViewHolderä¸ºåœ¨é€‚é…å™¨çš„ä¸€ä¸ªå†…éƒ¨ç±»)ï¼Œå¹¶é‡å†™3ä¸ªæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public ViewHolder onCreateViewHolder(ViewGroup parent,int viewType)//åˆ›å»ºè¿”å›ViewHolderå®ä¾‹</div><div class="line">public void onBindViewHolder(ViewHolder holder,int pisition)//æ•°æ®ä¸ç•Œé¢ç»‘å®š</div><div class="line">public int getItemCount()  // è¿”å›æ•°æ®çš„æ•°é‡</div></pre></td></tr></table></figure>
<p> æ–°å»º FruitAdapter ç»§æ‰¿è‡ª  RecyclerView.Adapter</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//ç»§æ‰¿è‡ªRecyclerView.Adapterï¼Œæ³›å‹ä¸º  FruitAdapter .ViewHolder</span></div><div class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">FruitAdapter</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</div><div class="line">   <span class="comment">//ç§æœ‰Fruitåˆ—è¡¨</span></div><div class="line">   <span class="keyword">private</span> List&lt;Fruit&gt; mFruitList;</div><div class="line"></div><div class="line"><span class="comment">//æ–°å»ºå†…éƒ¨ç±»ViewHolderç»§æ‰¿è‡ªRecyclerView.ViewHoldeæœ‰æ¯ä¸ªItemçš„çš„æ‰€æœ‰ç•Œé¢å…ƒç´ </span></div><div class="line">   <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span></span>&#123;</div><div class="line">       ImageView fruitImage;</div><div class="line">       TextView fruitName;</div><div class="line">       <span class="comment">//ViewHolderæ„é€ å‡½æ•°ï¼Œä¼ å…¥Viewï¼Œé€šå¸¸ä¸ºRecyclerViewå­é¡¹çš„å¤–å±‚å¸ƒå±€(æœ¬ä¾‹ä¸ºfruit_item.xml)</span></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View view)</span></span>&#123;</div><div class="line">           <span class="keyword">super</span>(view);</div><div class="line">           <span class="comment">//findViewByIdè·å–  Image/Nameå®ä¾‹</span></div><div class="line">           fruitImage = (ImageView)view.findViewById(R.id.fruit_image);</div><div class="line">           fruitName = (TextView)view.findViewById(R.id.fruit_name);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line"><span class="comment">//FruitAdapteræ„é€ å‡½æ•°ï¼Œå°†æ•°æ®æºä¼ å…¥å…¨å±€å˜é‡mFruitList</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">FruitAdapter</span><span class="params">(List&lt;Fruit&gt;fruitList)</span></span>&#123;</div><div class="line">       mFruitList = fruitList;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="comment">//åˆ›å»ºViewHolderå®ä¾‹</span></div><div class="line">   <span class="function"><span class="keyword">public</span> ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent,<span class="keyword">int</span> viewType)</span></span>&#123;</div><div class="line">       <span class="comment">//åŠ è½½å¸ƒå±€æ–‡ä»¶</span></div><div class="line">       View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.fruit_item,parent,<span class="keyword">false</span>);</div><div class="line">       <span class="comment">//è°ƒç”¨ViewHolderæ„é€ å‡½æ•°</span></div><div class="line">       ViewHolder holder = <span class="keyword">new</span> ViewHolder(view);</div><div class="line">       <span class="comment">//è¿”å›ViewHolderå®ä¾‹</span></div><div class="line">       <span class="keyword">return</span> holder;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="comment">//å¯¹ RecyclerViewå­é¡¹è¿›è¡Œèµ‹å€¼ï¼Œæœ‰æ–°çš„å­é¡¹è¿›å…¥å±å¹•æ˜¾ç¤ºèŒƒå›´æ—¶è°ƒç”¨</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder holder,<span class="keyword">int</span> pisition)</span></span>&#123;</div><div class="line">       Fruit fruit = mFruitList.get(pisition);</div><div class="line">       holder.fruitImage.setImageResource(fruit.getImageId());</div><div class="line">       holder.fruitName.setText(fruit.getName());</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="comment">//è¿”å› RecyclerViewå­é¡¹æ•°é‡</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span></span>&#123;</div><div class="line">       <span class="keyword">return</span> mFruitList.size();</div><div class="line">   &#125;</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>MainActivityä¸­ä½¿ç”¨RecyclerView</p>
<ul>
<li><p>åˆ›å»ºRecyclerViewå¯¹è±¡</p>
</li>
<li><p>è®¾ç½®LayoutManageræ˜¾ç¤ºè§„åˆ™ï¼ˆé»˜è®¤ç«–å‘æ»šåŠ¨ï¼‰</p>
</li>
<li><p>è®¾ç½®é€‚é…å™¨</p>
</li>
</ul>
<p>ä»£ç å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"><span class="comment">//ç§æœ‰åˆ—è¡¨</span></div><div class="line">   <span class="keyword">private</span> List&lt;Fruit&gt; fruitList = <span class="keyword">new</span> ArrayList&lt;Fruit&gt;();</div><div class="line">   </div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">       <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">       setContentView(R.layout.activity_main);</div><div class="line">	</div><div class="line">       <span class="comment">//åˆå§‹åŒ–Fruitsæ•°æ®</span></div><div class="line">       initFruits();</div><div class="line">       <span class="comment">//è·å–RecyclerViewå®ä¾‹</span></div><div class="line">       RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycle_view);</div><div class="line">       </div><div class="line">       <span class="comment">//åˆ›å»ºLinearLayoutManagerï¼Œå¹¶è®¾ç½®å…¥recyclerView</span></div><div class="line">       LinearLayoutManager layoutManager = <span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>);</div><div class="line">       recyclerView.setLayoutManager(layoutManager);</div><div class="line">       </div><div class="line">       <span class="comment">//æ–°å»ºé€‚é…å™¨ï¼Œå¹¶ä¼ å…¥</span></div><div class="line">       FruitAdapter adapter = <span class="keyword">new</span> FruitAdapter(fruitList);</div><div class="line">       recyclerView.setAdapter(adapter);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">//åˆå§‹åŒ–Fruitsç±»</span></div><div class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initFruits</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="comment">//å¾ªç¯ä¸¤é æ€•å ä¸æ»¡å±å¹•</span></div><div class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</div><div class="line">           Fruit apple = <span class="keyword">new</span> Fruit(<span class="string">"Apple"</span>, R.drawable.apple_pic);</div><div class="line">           fruitList.add(apple);</div><div class="line">           Fruit banana = <span class="keyword">new</span> Fruit(<span class="string">"Banana"</span>, R.drawable.banana_pic);</div><div class="line">           fruitList.add(banana);</div><div class="line">           Fruit orange = <span class="keyword">new</span> Fruit(<span class="string">"Orange"</span>, R.drawable.orange_pic);</div><div class="line">           fruitList.add(orange);</div><div class="line">           Fruit watermelon = <span class="keyword">new</span> Fruit(<span class="string">"Watermelon"</span>, R.drawable.watermelon_pic);</div><div class="line">           fruitList.add(watermelon);</div><div class="line">           Fruit pear = <span class="keyword">new</span> Fruit(<span class="string">"Pear"</span>, R.drawable.pear_pic);</div><div class="line">           fruitList.add(pear);</div><div class="line">           Fruit grape = <span class="keyword">new</span> Fruit(<span class="string">"Grape"</span>, R.drawable.grape_pic);</div><div class="line">           fruitList.add(grape);</div><div class="line">           Fruit pineapple = <span class="keyword">new</span> Fruit(<span class="string">"Pineapple"</span>, R.drawable.pineapple_pic);</div><div class="line">           fruitList.add(pineapple);</div><div class="line">           Fruit strawberry = <span class="keyword">new</span> Fruit(<span class="string">"Strawberry"</span>, R.drawable.strawberry_pic);</div><div class="line">           fruitList.add(strawberry);</div><div class="line">           Fruit cherry = <span class="keyword">new</span> Fruit(<span class="string">"Cherry"</span>, R.drawable.cherry_pic);</div><div class="line">           fruitList.add(cherry);</div><div class="line">           Fruit mango = <span class="keyword">new</span> Fruit(<span class="string">"Mango"</span>, R.drawable.mango_pic);</div><div class="line">           fruitList.add(mango);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿™æ ·æœ€ç®€å•çš„ RecyclerView å°±æ­å»ºå®Œäº†æ•ˆæœå¦‚ä¸‹<br><img src="http://cdn5.snapgram.co/images/2016/12/16/ScreenShot_20161216105246.png" alt="ScreenShot_20161216105246.png"></p>
</li>
<li><p>ä»£ç æ¯”ListViewç¨å¤šï¼Œä½†æ˜¯é€»è¾‘æ¯”è¾ƒæ¸…æ™°ã€‚</p>
</li>
</ul>
<h3 id="æ¨ªå‘-ç€‘å¸ƒæµ-ç½‘æ ¼å¸ƒå±€"><a href="#æ¨ªå‘-ç€‘å¸ƒæµ-ç½‘æ ¼å¸ƒå±€" class="headerlink" title="æ¨ªå‘/ç€‘å¸ƒæµ/ç½‘æ ¼å¸ƒå±€"></a>æ¨ªå‘/ç€‘å¸ƒæµ/ç½‘æ ¼å¸ƒå±€</h3><ul>
<li>åªéœ€è¦è®¾ç½®ç›¸åº”LayoutManagerå³å¯   /æ‰‹åŠ¨æ»‘ç¨½  <h4 id="æ¨ªå‘"><a href="#æ¨ªå‘" class="headerlink" title="æ¨ªå‘"></a>æ¨ªå‘</h4></li>
<li><p>åœ¨ LinearLayoutManager ä¸­ä¿®æ”¹å‡ è¡Œä»£ç å³å¯</p>
</li>
<li><p>ä¿®æ”¹ LinearLayoutManager ä»£ç ï¼Œæ·»åŠ ä¸€è¡Œï¼Œæå®šï¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layoutManager.setOrientation(LinearLayoutManager.HORIZONTAL);</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>å½“ç„¶éœ€è¦ç®€å•ä¿®æ”¹ä¸€ä¸‹itemçš„å¸ƒå±€æ–‡ä»¶ï¼ŒLinearLayoutæ”¹ä¸ºå‚ç›´æ’åˆ—ï¼Œå®½åº¦å›ºå®š100dpï¼Œå›¾ç‰‡/æ–‡å­—å±…ä¸­<br>æ•ˆæœå¦‚ä¸‹<br><img src="http://cdn2.snapgram.co/imgs/2016/12/16/ScreenShot_20161216105723.png" alt="ScreenShot_20161216105723.png"></li>
</ul>
<h4 id="ç€‘å¸ƒæµ"><a href="#ç€‘å¸ƒæµ" class="headerlink" title="ç€‘å¸ƒæµ"></a>ç€‘å¸ƒæµ</h4><ul>
<li>è¿™éœ€è¦ StaggeredGridLayoutManager å¸ƒå±€ç®¡ç†å™¨ï¼Œå¯ä»¥ ç«–å‘/æ¨ªå‘ æ»šåŠ¨</li>
<li>ä»£ç å¦‚ä¸‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ç€‘å¸ƒæµå¸ƒå±€ï¼Œ3è¡Œï¼Œç«–å‘</span></div><div class="line">StaggeredGridLayoutManager layoutManager = <span class="keyword">new</span> StaggeredGridLayoutManager(<span class="number">3</span>, StaggeredGridLayoutManager.VERTICAL);</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>è°ƒæ•´å¸ƒå±€æ–‡ä»¶ï¼Œæ•ˆæœå¦‚ä¸‹<br><img src="http://cdn1.snapgram.co/imgs/2016/12/16/ScreenShot_20161216215538.png" alt="ScreenShot_20161216215538.png"></li>
</ul>
<h4 id="ç½‘æ ¼"><a href="#ç½‘æ ¼" class="headerlink" title="ç½‘æ ¼"></a>ç½‘æ ¼</h4><ul>
<li>è¿™éœ€è¦ GridLayoutManager å¸ƒå±€ç®¡ç†å™¨</li>
<li><p>ä»£ç å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ç½‘æ ¼å¸ƒå±€ï¼Œä¸¤è¡Œ</span></div><div class="line">GridLayoutManager layoutManager = <span class="keyword">new</span> GridLayoutManager(<span class="keyword">this</span>,<span class="number">3</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>è°ƒæ•´å¸ƒå±€æ–‡ä»¶åï¼Œæ•ˆæœå¦‚ä¸‹<br><img src="http://cdn4.snapgram.co/images/2016/12/16/ScreenShot_20161216220321.png" alt="ScreenShot_20161216220321.png"></p>
</li>
</ul>
<h3 id="æ³¨å†Œç‚¹å‡»äº‹ä»¶"><a href="#æ³¨å†Œç‚¹å‡»äº‹ä»¶" class="headerlink" title="æ³¨å†Œç‚¹å‡»äº‹ä»¶"></a>æ³¨å†Œç‚¹å‡»äº‹ä»¶</h3><ul>
<li>RecyclerView ä¸­å¹¶æ²¡æœ‰æä¾›æ³¨å†Œç›‘å¬å™¨çš„æ–¹æ³•ï¼Œéœ€è¦å­é¡¹Viewè‡ªè¡Œæ³¨å†Œ</li>
<li>éƒ¨åˆ†ä»£ç å¦‚ä¸‹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line">    View fruitView;</div><div class="line">    ImageView fruitImage;</div><div class="line">    TextView fruitName;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(view);</div><div class="line">        fruitView = view;</div><div class="line">        fruitImage = (ImageView) view.findViewById(R.id.fruit_image);</div><div class="line">        fruitName = (TextView) view.findViewById(R.id.fruit_name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.fruit_item, parent, <span class="keyword">false</span>);</div><div class="line">    <span class="keyword">final</span> ViewHolder holder = <span class="keyword">new</span> ViewHolder(view);</div><div class="line">    holder.fruitView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">            <span class="keyword">int</span> position = holder.getAdapterPosition();</div><div class="line">            Fruit fruit = mFruitList.get(position);</div><div class="line">            Toast.makeText(v.getContext(), <span class="string">"you clicked view "</span> + fruit.getName(), Toast.LENGTH_SHORT).show();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    holder.fruitImage.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">            <span class="keyword">int</span> position = holder.getAdapterPosition();</div><div class="line">            Fruit fruit = mFruitList.get(position);</div><div class="line">            Toast.makeText(v.getContext(), <span class="string">"you clicked image "</span> + fruit.getName(), Toast.LENGTH_SHORT).show();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> holder;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

	

	
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

	
	
	<div>
	    <p id="div-border-left-blue">
	   <b>æœ¬æ–‡åŸºäº<a target="_blank" title="Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)" href="http://creativecommons.org/licenses/by-sa/4.0/"> çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 </a>å›½é™…è®¸å¯åè®®å‘å¸ƒ</b><br/>
	    <span>
	    <b>æœ¬æ–‡åœ°å€ï¼š</b><a href="/page/2/index.html" title=""></a><br/><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼</b>
	    </span>
	    </p>
	</div>
	

	
    <footer class="post-footer">
	
	
	
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/v.png"
               alt="Jasper" />
          <p class="site-author-name" itemprop="name">Jasper</p>
           
              <p class="site-description motion-element" itemprop="description">ç¨‹åºå‘˜ å¾®å°˜ V</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jasper-1024" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016.6.2 - 
  <span itemprop="copyrightYear">2017.11.6</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jasper</span>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  

    
      <script id="dsq-count-scr" src="https://jasper1024.disqus.com/count.js" async></script>
    

    

  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("8AEPwU1rVoSnwxtOrX35u23j-gzGzoHsz", "SBLr7EMdL83IXCfJSbydMdll");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
</body>
</html>
